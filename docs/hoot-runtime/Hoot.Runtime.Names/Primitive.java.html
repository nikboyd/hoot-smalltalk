<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Primitive.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hoot-runtime</a> &gt; <a href="index.source.html" class="el_package">Hoot.Runtime.Names</a> &gt; <span class="el_source">Primitive.java</span></div><h1>Primitive.java</h1><pre class="source lang-java linenums">package Hoot.Runtime.Names;

import java.io.*;
import java.util.*;
import java.time.*;
import java.math.*;
import java.time.format.*;
import java.lang.reflect.*;
import static java.lang.Math.*;
import static java.lang.reflect.Modifier.*;
import org.apache.commons.lang3.StringUtils;
import static org.apache.commons.lang3.StringUtils.*;

import Hoot.Runtime.Faces.Valued;
import Hoot.Runtime.Faces.Logging;
import Hoot.Runtime.Faces.IntegerValue;
import Hoot.Runtime.Behaviors.HootRegistry;
import static Hoot.Runtime.Names.Name.Dot;
import static Hoot.Runtime.Names.Keyword.Arrayed;
import static Hoot.Runtime.Functions.Exceptional.*;
import static Hoot.Runtime.Functions.Utils.*;

/**
 * Knows primitive Java types.
 *
 * @author nik &lt;nikboyd@sonic.net&gt;
 * @see &quot;Copyright 2010,2021 Nikolas S Boyd.&quot;
 * @see &quot;Permission is granted to copy this work provided this copyright statement is retained in all copies.&quot;
 */
<span class="fc" id="L30">public class Primitive implements Logging {</span>

    // system level logging
<span class="nc" id="L33">    public static void printError(String message) { System.err.println(message); }</span>
<span class="nc" id="L34">    public static void printLine(String message) { System.out.println(message); }</span>
<span class="fc" id="L35">    public static void print(String message) { System.out.print(message); }</span>
<span class="fc" id="L36">    public static void printLine() { System.out.println(); }</span>

    static final String LongReport = &quot;%,d&quot;;
<span class="nc" id="L39">    public static String printLong(long longValue) { return String.format(LongReport, longValue); }</span>

    public static final String WriteMode = &quot;rw&quot;;
    public static final String CreateMode = &quot;create&quot;;
    public static final String AppendMode = &quot;append&quot;;
    public static final String TruncateMode = &quot;truncate&quot;;
    public static RandomAccessFile writeFile(String fileName, String openMode) {
<span class="nc" id="L46">        File file = new File(fileName);</span>
<span class="nc bnc" id="L47" title="All 2 branches missed.">        if (file.exists()) {</span>
<span class="nc" id="L48">            return nullOrTryLoudly(() -&gt; {</span>
<span class="nc" id="L49">                RandomAccessFile result = new RandomAccessFile(file, WriteMode);</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">                if (!AppendMode.equals(openMode)) { result.setLength(0); } // truncate file</span>
<span class="nc" id="L51">                return result;</span>
            });
        }
        else {
<span class="nc" id="L55">            return nullOrTryLoudly(() -&gt; { return new RandomAccessFile(file, WriteMode); });</span>
        }
    }

    public static final String ReadMode = &quot;r&quot;;
<span class="nc" id="L60">    public static RandomAccessFile readFile(String fileName) { return readFile(fileName, ReadMode); }</span>
    public static RandomAccessFile readFile(String fileName, String fileMode) {
<span class="nc" id="L62">        return nullOrTryLoudly(() -&gt; {</span>
<span class="nc" id="L63">            File file = new File(fileName);</span>
<span class="nc bnc" id="L64" title="All 2 branches missed.">            if (!file.exists()) return null;</span>
<span class="nc" id="L65">            return new RandomAccessFile(file, fileMode);</span>
        });
    }

<span class="nc bnc" id="L69" title="All 2 branches missed.">    public static boolean isStatic(Field f) { return STATIC == (f.getModifiers() &amp; STATIC); }</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">    public static boolean isStatic(Method m) { return STATIC == (m.getModifiers() &amp; STATIC); }</span>

<span class="nc" id="L72">    public static int minimumPriority() { return Thread.MIN_PRIORITY; }</span>
<span class="nc" id="L73">    public static int maximumPriority() { return Thread.MAX_PRIORITY; }</span>
<span class="nc" id="L74">    public static int normalPriority() { return Thread.NORM_PRIORITY; }</span>

<span class="nc" id="L76">    public static void waitMilliseconds(IntegerValue duration) { runQuietly(() -&gt; Thread.sleep(duration.intValue())); }</span>

<span class="fc" id="L78">    static final DateTimeFormatter PreferredTimeFormat = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSS&quot;);</span>
<span class="nc" id="L79">    public static String printTime(LocalDateTime timestamp) { return timestamp.format(PreferredTimeFormat); }</span>
<span class="nc" id="L80">    public static String printTimeNow() { return printTime(LocalDateTime.now()); }</span>
    public static String formatTime(LocalDateTime timestamp, String pattern) {
<span class="nc" id="L82">        return timestamp.format(DateTimeFormatter.ofPattern(pattern)); }</span>

    public static int hierarchyDepth(Class&lt;?&gt; aClass) {
<span class="fc" id="L85">        int count = 0; Class&lt;?&gt; testClass = aClass;</span>
<span class="fc bfc" id="L86" title="All 2 branches covered.">        while (testClass != null) { count++; testClass = testClass.getSuperclass(); }</span>
<span class="fc" id="L87">        return count; }</span>

<span class="nc" id="L89">    public static int length(byte[] bytes) { return bytes.length; }</span>
<span class="nc" id="L90">    public static &lt;T&gt; int length(T[] elements) { return elements.length; }</span>
<span class="nc" id="L91">    public static String reverse(String value) { return StringUtils.reverse(value); }</span>

    public static List&lt;String&gt; tokenize(String value, String separators) {
<span class="nc" id="L94">        return map(Collections.list(tokens(value, separators)), token -&gt; (String)token); }</span>

    public static StringTokenizer tokens(String value, String separators) {
<span class="nc" id="L97">        return new StringTokenizer(value, separators); }</span>

<span class="fc" id="L99">    public static String systemValue(String valueName) { return System.getProperty(valueName); }</span>
    public static String systemValue(String valueName, String defaultValue) {
<span class="nc" id="L101">        return System.getProperty(valueName, defaultValue); }</span>

<span class="nc" id="L103">    public static Double radiansPerDegree() { return (Math.PI / 180.0f); }</span>
<span class="nc" id="L104">    public static Double degreesPerRadian() { return (180.0f / Math.PI); }</span>

    private static final int NegativeUnity = -1;
<span class="nc" id="L107">    public static int negativeUnity() { return NegativeUnity; }</span>

    static final String DigitValue = &quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;
    public static String printDecimal(long... values) { // upper, lower, scale
<span class="nc" id="L111">        StringBuilder b = new StringBuilder();</span>
<span class="nc" id="L112">        long upper = values[0];</span>
<span class="nc" id="L113">        long lower = values[1];</span>
<span class="nc" id="L114">        long scale = values[2];</span>
<span class="nc" id="L115">        long d = (long)Math.pow(10, scale);</span>
<span class="nc" id="L116">        long n = upper * d;</span>

<span class="nc" id="L118">        n += lower &gt;&gt; 1; n /= lower;</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">        if (upper &lt; 0L) {</span>
<span class="nc" id="L120">            b.append('-'); n = 0 - n;</span>
        }

<span class="nc" id="L123">        long quo = n / d;</span>
<span class="nc" id="L124">        long rem = n % d;</span>
<span class="nc" id="L125">        int s = (int)scale;</span>

<span class="nc" id="L127">        b.append(quo);</span>
<span class="nc" id="L128">        b.append('.');</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">        while (s-- &gt; 0) {</span>
<span class="nc" id="L130">            rem = rem * 10L;</span>
<span class="nc" id="L131">            int digit = (int)(rem / d);</span>
<span class="nc" id="L132">            b.append(DigitValue.charAt(digit));</span>
<span class="nc" id="L133">            rem = rem % d;</span>
<span class="nc" id="L134">        }</span>

<span class="nc" id="L136">        b.append('s');</span>
<span class="nc" id="L137">        b.append(scale);</span>
<span class="nc" id="L138">        return b.toString();</span>
    }

    @SuppressWarnings(&quot;UseSpecificCatch&quot;)
    public static boolean class_hasMethod(Class&lt;?&gt; aClass, String methodName) {
        try {
<span class="nc" id="L144">            return hasOne(aClass.getMethod(methodName));</span>
        }
<span class="nc" id="L146">        catch (Exception e) {</span>
<span class="nc" id="L147">            return false;</span>
        }
    }

    public static java.net.URL locateClass(Class&lt;?&gt; aClass) {
<span class="nc" id="L152">        return aClass.getProtectionDomain().getCodeSource().getLocation();</span>
    }

    public static Object newInstance(Class&lt;?&gt; aClass) {
        try {
<span class="nc" id="L157">            return aClass.newInstance();</span>
        }
<span class="nc" id="L159">        catch (IllegalAccessException | InstantiationException ex) {</span>
<span class="nc" id="L160">            printError(aClass.getCanonicalName() + &quot; can't create a new instance&quot;);</span>
<span class="nc" id="L161">            return HootRegistry.Nil();</span>
        }
    }

<span class="nc bnc" id="L165" title="All 2 branches missed.">    public static int gcd(int a, int b) { return b == 0 ? a : gcd(b, a % b); }</span>
    public static Integer[] rationalize(int num, int den) {
<span class="nc bnc" id="L167" title="All 2 branches missed.">        int n = den &lt; 0 ? -num : num;</span>
<span class="nc" id="L168">        int d = abs(den);</span>
<span class="nc" id="L169">        int gcd = gcd(n, d);</span>

<span class="nc bnc" id="L171" title="All 2 branches missed.">        if (d == gcd) {</span>
<span class="nc" id="L172">            Integer[] results = { n / gcd, 1 };</span>
<span class="nc" id="L173">            return results;</span>
        }

<span class="nc bnc" id="L176" title="All 2 branches missed.">        if (1 == gcd) {</span>
<span class="nc" id="L177">            Integer[] results = { n, d };</span>
<span class="nc" id="L178">            return results;</span>
        }

<span class="nc" id="L181">        Integer[] results = { n / gcd, d / gcd };</span>
<span class="nc" id="L182">        return results;</span>
    }

<span class="nc bnc" id="L185" title="All 2 branches missed.">    public static double truncate(double value) { return (value &lt; 0.0d ? Math.ceil(value) : Math.floor(value)); }</span>

    public static BigDecimal decimalFrom(long numerator, long denominator, int scale) {
<span class="nc" id="L188">        return new BigDecimal(numerator)</span>
<span class="nc" id="L189">            .divide(new BigDecimal(denominator),</span>
                scale, RoundingMode.HALF_UP); }

    public static BigInteger[] integersFrom(Double... ds) {
<span class="nc" id="L193">        BigInteger[] results = {</span>
<span class="nc" id="L194">            BigDecimal.valueOf(ds[0]).toBigInteger(),</span>
<span class="nc" id="L195">            BigDecimal.valueOf(ds[1]).toBigInteger() };</span>
<span class="nc" id="L196">        Reporter.whisper(results[0].toString());</span>
<span class="nc" id="L197">        Reporter.whisper(results[1].toString());</span>
<span class="nc" id="L198">        return results; }</span>

    public static BigInteger[] fractionalize(double value, int sig) {
<span class="nc" id="L201">        double limit = Math.pow( 10.0d, sig );</span>

<span class="nc" id="L203">        double n1 = truncate(value); double n2 = 1.0d;</span>
<span class="nc" id="L204">        double d1 = 1.0d; double d2 = 0.0d;</span>

<span class="nc" id="L206">        double i  = n1; double x  = 0.0d;</span>
<span class="nc" id="L207">        double f = value - n1;</span>

<span class="nc bnc" id="L209" title="All 2 branches missed.">        while (f != 0.0d) {</span>
<span class="nc" id="L210">            double dn = 1.0d / f;</span>
<span class="nc" id="L211">            i = truncate(dn); f = dn - i;</span>

<span class="nc" id="L213">            x = n2; n2 = n1;</span>
<span class="nc" id="L214">            n1 = ( n1 * i ) + x;</span>

<span class="nc" id="L216">            x = d2; d2 = d1;</span>
<span class="nc" id="L217">            d1 = ( d1 * i ) + x;</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">            if (limit &lt; d1) {</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">                if (n2 == 0.0d) {</span>
<span class="nc" id="L220">                    return integersFrom(n1, d1);</span>
                }
                else {
<span class="nc" id="L223">                    return integersFrom(n2, d2);</span>
                }
            }
<span class="nc" id="L226">        }</span>

<span class="nc" id="L228">        return integersFrom(n1, d1);</span>
    }

    public static Long[] parseDecimal(String value) {
<span class="nc" id="L232">        int point = value.indexOf( '.' );</span>
<span class="nc" id="L233">        int sMark = value.indexOf( 's' );</span>
<span class="nc" id="L234">        String iString = value.substring( 0, point );</span>
<span class="nc" id="L235">        String fString = value.substring( point + 1, sMark );</span>
<span class="nc" id="L236">        String sString = value.substring( sMark + 1 );</span>

<span class="nc" id="L238">        long scale = 0;</span>
<span class="nc" id="L239">        long numerator = 0;</span>
<span class="nc" id="L240">        long denominator = 1;</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">        for( int i = 0; i &lt; fString.length(); i++ ) denominator *= 10;</span>
<span class="nc" id="L242">        Long[] results = { numerator, denominator, scale };</span>

        // integer digits + fraction digits / scale of 10s
<span class="nc" id="L245">        runQuietly(() -&gt; {</span>
<span class="nc" id="L246">            results[2] = Long.parseLong(sString);</span>
<span class="nc" id="L247">            results[0] = Long.parseLong(iString + fString);</span>
<span class="nc" id="L248">        });</span>
<span class="nc" id="L249">        return results;</span>
    }

<span class="nc" id="L252">    public static int invertBits(int bits) { return ~bits; }</span>
<span class="nc" id="L253">    public static int xorBits(int a, int b) { return a ^ b; }</span>

<span class="nc" id="L255">    public static Double elementaryMaxDouble() { return java.lang.Double.MAX_VALUE; }</span>
<span class="nc" id="L256">    public static Double elementaryMinDouble() { return java.lang.Double.MIN_VALUE; }</span>

<span class="nc" id="L258">    public static Float elementaryMaxFloat() { return java.lang.Float.MAX_VALUE; }</span>
<span class="nc" id="L259">    public static Float elementaryMinFloat() { return java.lang.Float.MIN_VALUE; }</span>

<span class="nc" id="L261">    public static Long elementaryMaxLong() { return java.lang.Long.MAX_VALUE; }</span>
<span class="nc" id="L262">    public static Long elementaryMinLong() { return java.lang.Long.MIN_VALUE; }</span>

<span class="nc" id="L264">    public static Integer elementaryMaxInteger() { return java.lang.Integer.MAX_VALUE; }</span>
<span class="nc" id="L265">    public static Integer elementaryMinInteger() { return java.lang.Integer.MIN_VALUE; }</span>

<span class="nc" id="L267">    public static Short elementaryMaxShort() { return java.lang.Short.MAX_VALUE; }</span>
<span class="nc" id="L268">    public static Short elementaryMinShort() { return java.lang.Short.MIN_VALUE; }</span>

<span class="nc" id="L270">    public static Boolean elementaryFalse() { return java.lang.Boolean.FALSE; }</span>
<span class="fc" id="L271">    public static Boolean elementaryTrue() { return java.lang.Boolean.TRUE; }</span>

<span class="nc" id="L273">    public static float getFloat(String value) { return Float.parseFloat(value); }</span>
    public static String getLiteral(String value) {
<span class="nc bnc" id="L275" title="All 2 branches missed.">        if (isEmpty(value)) return Empty;</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">        if (value.startsWith(Dollar)) return quoteWith(SingleQuote, value.substring(1));</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">        if (value.startsWith(Pound)) return quoteWith(NativeQuote, value.substring(1));</span>
<span class="nc bnc" id="L278" title="All 2 branches missed.">        if (value.startsWith(SingleQuote)) return quoteNatively(value);</span>
<span class="nc" id="L279">        return value; }</span>

    public static final String SingleQuote = &quot;'&quot;;
<span class="fc" id="L282">    public static String quoteLiterally(String value) { return quoteWith(SingleQuote, value); }</span>
<span class="nc" id="L283">    public static String trimQuotes(String quote, String value) { return StringUtils.strip(value, quote); }</span>

    public static final String NativeQuote = &quot;\&quot;&quot;;
    public static final String DoubledQuotes = &quot;''&quot;;
    public static String quoteNatively(String value) {
<span class="nc" id="L288">        return quoteWith(NativeQuote, trimQuotes(SingleQuote, value).replace(DoubledQuotes, SingleQuote)); }</span>

    public static String quoteWith(String quote, String value) {
<span class="pc bpc" id="L291" title="1 of 2 branches missed.">        return (isEmpty(value) ? quote + quote : quote + value + quote); }</span>

<span class="nc" id="L293">    public static Valued shallowCopyOf(Valued v) { return v; }</span>
<span class="nc" id="L294">    public static Valued deepCopyOf(Valued v) { return v; }</span>

<span class="fc" id="L296">    protected static final String[] ElementPackages = { &quot;java.&quot;, &quot;javax.&quot;, };</span>
<span class="fc" id="L297">    protected static final List&lt;String&gt; ElementaryPackages = wrap(ElementPackages);</span>

<span class="fc" id="L299">    public static final String[] SerializedNames = { &quot;Cloneable&quot;, &quot;Serializable&quot;, &quot;CharSequence&quot;, &quot;Comparable&quot;, };</span>
<span class="fc" id="L300">    public static final List&lt;String&gt; SerializedTypes = wrap(SerializedNames);</span>

<span class="fc" id="L302">    protected static final Map&lt;String, String&gt; ConversionTypes = emptyWordMap();</span>
<span class="fc" id="L303">    protected static final Map&lt;String, String&gt; PrimitiveWrappers = emptyWordMap();</span>
<span class="fc" id="L304">    protected static final Map&lt;String, String&gt; PrimitiveUnwrappers = emptyWordMap();</span>
<span class="fc" id="L305">    protected static final Map&lt;String, String&gt; ElementaryWrappers = emptyWordMap();</span>
<span class="fc" id="L306">    protected static final Map&lt;String, String&gt; ElementaryUnwrappers = emptyWordMap();</span>
<span class="fc" id="L307">    protected static final Map&lt;String, Class&gt; PrimitiveTypes = emptyMap(Class.class);</span>
<span class="fc" id="L308">    protected static final List&lt;String&gt; Primitives = emptyList(String.class);</span>
<span class="fc" id="L309">    public    static final Class&lt;?&gt; JavaRoot = java.lang.Object.class;</span>

    static {
<span class="fc" id="L312">        initializePrimitiveTypes();</span>
<span class="fc" id="L313">        initializePrimitiveWrappers();</span>
<span class="fc" id="L314">        initializeObjectWrappers();</span>
    }

    protected static void initializePrimitiveTypes() {
<span class="fc" id="L318">        PrimitiveTypes.put(&quot;void&quot;, void.class);</span>
<span class="fc" id="L319">        PrimitiveTypes.put(&quot;boolean&quot;, boolean.class);</span>
<span class="fc" id="L320">        PrimitiveTypes.put(&quot;byte&quot;, byte.class);</span>
<span class="fc" id="L321">        PrimitiveTypes.put(&quot;char&quot;, char.class);</span>
<span class="fc" id="L322">        PrimitiveTypes.put(&quot;int&quot;, int.class);</span>
<span class="fc" id="L323">        PrimitiveTypes.put(&quot;short&quot;, short.class);</span>
<span class="fc" id="L324">        PrimitiveTypes.put(&quot;long&quot;, long.class);</span>
<span class="fc" id="L325">        PrimitiveTypes.put(&quot;float&quot;, float.class);</span>
<span class="fc" id="L326">        PrimitiveTypes.put(&quot;double&quot;, double.class);</span>
<span class="fc" id="L327">        PrimitiveTypes.put(&quot;string&quot;, String.class);</span>
<span class="fc" id="L328">        PrimitiveTypes.put(&quot;decimal&quot;, java.math.BigDecimal.class);</span>
<span class="fc" id="L329">    }</span>

    protected static void initializePrimitiveWrappers() {
<span class="fc" id="L332">        PrimitiveWrappers.put(&quot;boolean&quot;, &quot;Boolean&quot;);</span>
<span class="fc" id="L333">        PrimitiveWrappers.put(&quot;byte&quot;, &quot;Number&quot;);</span>
<span class="fc" id="L334">        PrimitiveWrappers.put(&quot;char&quot;, &quot;Number&quot;);</span>
<span class="fc" id="L335">        PrimitiveWrappers.put(&quot;short&quot;, &quot;Number&quot;);</span>
<span class="fc" id="L336">        PrimitiveWrappers.put(&quot;int&quot;, &quot;Number&quot;);</span>
<span class="fc" id="L337">        PrimitiveWrappers.put(&quot;long&quot;, &quot;Number&quot;);</span>
<span class="fc" id="L338">        PrimitiveWrappers.put(&quot;float&quot;, &quot;Float&quot;);</span>
<span class="fc" id="L339">        PrimitiveWrappers.put(&quot;double&quot;, &quot;Double&quot;);</span>

<span class="fc" id="L341">        PrimitiveUnwrappers.put(&quot;boolean&quot;, &quot;asPrimitive&quot;);</span>
<span class="fc" id="L342">        PrimitiveUnwrappers.put(&quot;byte&quot;, &quot;primitiveByte&quot;);</span>
<span class="fc" id="L343">        PrimitiveUnwrappers.put(&quot;char&quot;, &quot;primitiveCharacter&quot;);</span>
<span class="fc" id="L344">        PrimitiveUnwrappers.put(&quot;short&quot;, &quot;primitiveShort&quot;);</span>
<span class="fc" id="L345">        PrimitiveUnwrappers.put(&quot;int&quot;, &quot;primitiveInteger&quot;);</span>
<span class="fc" id="L346">        PrimitiveUnwrappers.put(&quot;long&quot;, &quot;primitiveLong&quot;);</span>
<span class="fc" id="L347">        PrimitiveUnwrappers.put(&quot;float&quot;, &quot;asPrimitive&quot;);</span>
<span class="fc" id="L348">        PrimitiveUnwrappers.put(&quot;double&quot;, &quot;asPrimitive&quot;);</span>

<span class="fc" id="L350">        Primitives.addAll(PrimitiveWrappers.keySet());</span>
<span class="fc" id="L351">        Primitives.add(&quot;void&quot;);</span>
<span class="fc" id="L352">    }</span>

    protected static void initializeObjectWrappers() {
<span class="fc" id="L355">        ConversionTypes.put(&quot;Int&quot;, &quot;int&quot;);</span>
<span class="fc" id="L356">        ConversionTypes.put(&quot;Byte&quot;, &quot;byte&quot;);</span>
<span class="fc" id="L357">        ConversionTypes.put(&quot;java.lang.Byte&quot;, &quot;byte&quot;);</span>
<span class="fc" id="L358">        ConversionTypes.put(&quot;java.lang.Boolean&quot;, &quot;boolean&quot;);</span>
<span class="fc" id="L359">        ConversionTypes.put(&quot;java.lang.String&quot;, &quot;java.lang.String&quot;);</span>

<span class="fc" id="L361">        ElementaryWrappers.put(&quot;java.math.BigDecimal&quot;, &quot;Fixed&quot;);</span>
<span class="fc" id="L362">        ElementaryWrappers.put(&quot;java.lang.Boolean&quot;, &quot;Boolean&quot;);</span>
<span class="fc" id="L363">        ElementaryWrappers.put(&quot;java.lang.Float&quot;, &quot;Float&quot;);</span>
<span class="fc" id="L364">        ElementaryWrappers.put(&quot;java.lang.Double&quot;, &quot;Double&quot;);</span>
<span class="fc" id="L365">        ElementaryWrappers.put(&quot;java.lang.Character&quot;, &quot;Character&quot;);</span>
<span class="fc" id="L366">        ElementaryWrappers.put(&quot;java.lang.String&quot;, &quot;String&quot;);</span>
<span class="fc" id="L367">        ElementaryWrappers.put(JavaRoot.getCanonicalName(), &quot;Object&quot;);</span>

<span class="fc" id="L369">        ElementaryWrappers.put(&quot;Boolean&quot;, &quot;Boolean&quot;);</span>
<span class="fc" id="L370">        ElementaryWrappers.put(&quot;String&quot;, &quot;String&quot;);</span>
<span class="fc" id="L371">        ElementaryWrappers.put(&quot;Float&quot;, &quot;Float&quot;);</span>
<span class="fc" id="L372">        ElementaryWrappers.put(&quot;Double&quot;, &quot;Double&quot;);</span>
<span class="fc" id="L373">        ElementaryWrappers.put(&quot;Object&quot;, &quot;Object&quot;);</span>

<span class="fc" id="L375">        ElementaryUnwrappers.put(&quot;java.math.BigDecimal&quot;, &quot;asPrimitive&quot;);</span>
<span class="fc" id="L376">        ElementaryUnwrappers.put(&quot;java.lang.Boolean&quot;, &quot;asPrimitive&quot;);</span>
<span class="fc" id="L377">        ElementaryUnwrappers.put(&quot;java.lang.String&quot;, &quot;asPrimitive&quot;);</span>

        // can any others be predetermined?
<span class="fc" id="L380">    }</span>

    public static Class typeNamed(String typeName) {
<span class="nc" id="L383">        return PrimitiveTypes.getOrDefault(typeName.toLowerCase(), null); }</span>

<span class="fc" id="L385">    public static String simplifiedType(String typeName) { return typeName.replace(Arrayed, Empty).toLowerCase(); }</span>
<span class="nc" id="L386">    public static Class getPrimitiveType(String typeName) { return PrimitiveTypes.get(typeName); }</span>
    public static String convertType(String typeName) {
<span class="pc bpc" id="L388" title="1 of 2 branches missed.">        String result = convertsType(typeName) ? ConversionTypes.get(typeName) : typeName;</span>
<span class="fc" id="L389">        return result; }</span>

    public static boolean convertsType(String typeName) {
<span class="pc bpc" id="L392" title="1 of 4 branches missed.">        return !typeName.isEmpty() &amp;&amp; ConversionTypes.containsKey(typeName); }</span>

    public static boolean isPrimitiveType(String typeName) {
<span class="pc bpc" id="L395" title="1 of 2 branches missed.">        return !typeName.isEmpty() &amp;&amp;</span>
<span class="fc bfc" id="L396" title="All 2 branches covered.">            Primitives.contains(simplifiedType(typeName)) &amp;&amp;</span>
<span class="fc bfc" id="L397" title="All 2 branches covered.">            !ElementaryWrappers.containsKey(typeName); }</span>

    public static boolean isElementaryType(String typeName) {
<span class="pc bpc" id="L400" title="1 of 4 branches missed.">        return !typeName.isEmpty() &amp;&amp; ElementaryWrappers.containsKey(typeName); }</span>

    public static boolean isEraseableType(String typeName) {
<span class="nc bnc" id="L403" title="All 2 branches missed.">        return !typeName.isEmpty() &amp;&amp;</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">            (PrimitiveWrappers.containsKey(simplifiedType(typeName)) ||</span>
<span class="nc bnc" id="L405" title="All 2 branches missed.">            ElementaryWrappers.containsKey(typeName)); }</span>

    public static boolean fromElementaryPackage(String typeName) {
<span class="pc bpc" id="L408" title="2 of 4 branches missed.">        return !typeName.isEmpty() &amp;&amp; typeName.contains(Dot) ?</span>
<span class="fc" id="L409">            matchAny(ElementaryPackages, prefix -&gt; simplifiedType(typeName).startsWith(prefix)) :</span>
<span class="nc" id="L410">            matchAny(ElementaryPackages, prefix -&gt; prefix.startsWith(simplifiedType(typeName))); }</span>

    public static String[] wrapsFrom(String typeName) {
<span class="nc bnc" id="L413" title="All 2 branches missed.">        if (PrimitiveWrappers.containsKey(typeName)) {</span>
<span class="nc" id="L414">            String[] result = { PrimitiveWrappers.get(typeName), PrimitiveUnwrappers.get(typeName) };</span>
<span class="nc" id="L415">            return result;</span>
        }

<span class="nc bnc" id="L418" title="All 2 branches missed.">        if (ElementaryWrappers.containsKey(typeName)) {</span>
<span class="nc" id="L419">            String[] result = { ElementaryWrappers.get(typeName), ElementaryUnwrappers.get(typeName) };</span>
<span class="nc" id="L420">            return result;</span>
        }

<span class="nc" id="L423">        String[] empty = EmptyArray;</span>
<span class="nc" id="L424">        return empty;</span>
    }


    public static final String Dollar = &quot;$&quot;;
    public static final String Pound = &quot;#&quot;;
    public static final String Blank = &quot; &quot;;
<span class="fc" id="L431">    public static final String[] EmptyArray = { };</span>
<span class="fc" id="L432">    public static final Primitive Reporter = new Primitive();</span>

} // Primitive
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>