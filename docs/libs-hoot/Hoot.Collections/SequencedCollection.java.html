<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SequencedCollection.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">libs-hoot</a> &gt; <a href="index.source.html" class="el_package">Hoot.Collections</a> &gt; <span class="el_source">SequencedCollection.java</span></div><h1>SequencedCollection.java</h1><pre class="source lang-java linenums">/**
* Copyright 2010,2021 Nikolas S Boyd.
Permission is granted to copy this work provided this copyright statement is retained in all copies.

*/
package Hoot.Collections;

import Hoot.Runtime.Functions.*;
import Hoot.Runtime.Faces.*;
import Hoot.Runtime.Values.*;
import Hoot.Runtime.Blocks.*;
import Smalltalk.Core.*;
import Smalltalk.Blocks.*;
import Hoot.Behaviors.*;
import Hoot.Behaviors.Nil;
import Hoot.Behaviors.Object;
import Hoot.Behaviors.True;
import Hoot.Behaviors.False;
import Hoot.Behaviors.Boolean;
import Hoot.Magnitudes.*;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.Character;
import Hoot.Magnitudes.Float;
import Hoot.Magnitudes.Double;
import Hoot.Magnitudes.Number;
import Hoot.Magnitudes.Integer;
import static Hoot.Magnitudes.SmallInteger.*;
import Hoot.Streams.WriteStream;
import Hoot.Streams.ReadStream;
import Smalltalk.Blocks.*;
import Smalltalk.Collections.*;
import Smalltalk.Magnitudes.Ordinal;
import Smalltalk.Magnitudes.Numeric;
import Smalltalk.Core.Subject;

<span class="fc" id="L36">public abstract class SequencedCollection&lt;ElementType extends Object&gt; extends Collection&lt;ElementType&gt; implements CollectedOrdinally&lt;ElementType&gt;</span>
{

<span class="nc" id="L39">  public static Metaclass type() { return (Metaclass)Metaclass.$class; }</span>
<span class="nc" id="L40">  @Override public Metaclass $class() { return (Metaclass)Metaclass.$class; }</span>
  public static class Metaclass extends Collection.Metaclass implements CollectedOrdinally.Metatype
  {
<span class="fc" id="L43">    static final SequencedCollection.Metaclass $class = new SequencedCollection.Metaclass();</span>
    public Metaclass() {
<span class="fc" id="L45">      this(SequencedCollection.Metaclass.class);</span>
<span class="fc" id="L46">    }</span>

    public Metaclass(java.lang.Class aClass) {
<span class="fc" id="L49">      super(aClass);</span>
<span class="fc" id="L50">    }</span>

<span class="fc" id="L52">    @Override public java.lang.Class outerClass() { return SequencedCollection.class; }</span>

  }



  /**
   * @return 
   */
  abstract protected   ElementType get(final int index);

  /**
   * @return 
   */
  abstract protected   ElementType add_at(final ElementType element, final int index);

  /**
   * @return 
   */
  public   ElementType first()
  {
<span class="fc" id="L73">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;first&quot;;</span>
<span class="fc" id="L74">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L75">    this.emptyCheck();</span>
<span class="fc" id="L76">    return (ElementType)this.at(SmallInteger.from(1));</span>
  }

  /**
   * @return 
   */
  public   ElementType last()
  {
<span class="fc" id="L84">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;last&quot;;</span>
<span class="fc" id="L85">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L86">    this.emptyCheck();</span>
<span class="fc" id="L87">    return (ElementType)this.at(this.size());</span>
  }

  /**
   * @return 
   */
  public   ElementType at(final Numeric index)
  {
<span class="nc" id="L95">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;at&quot;;</span>
<span class="nc" id="L96">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L97">    return (ElementType)this.at(index.asInteger());</span>
  }

  /**
   * @return 
   */
  public   ElementType at_ifAbsent(final Numeric index, final NiladicValuable noneBlock)
  {
<span class="nc" id="L105">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;at_ifAbsent&quot;;</span>
<span class="nc" id="L106">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L107">    return (ElementType)this.at_ifAbsent(index.asInteger(), noneBlock);</span>
  }

  /**
   * @return 
   */
  public   ElementType at(final Ordinal index)
  {
<span class="fc" id="L115">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;at&quot;;</span>
<span class="fc" id="L116">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L117">    return (ElementType)this.at_ifAbsent(index, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L118">      return this.indexRangeError();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   ElementType at_ifAbsent(final Ordinal index, final NiladicValuable noneBlock)
  {
<span class="fc" id="L127">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;at_ifAbsent&quot;;</span>
<span class="fc" id="L128">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L129">    int i = this.checkIndex_ifAbsent(index, noneBlock);</span>
<span class="fc" id="L130">    return (ElementType)this.get(i);</span>
  }

  /**
   * @return 
   */
  public   Integer nextIndexOf_from_to(final ElementType element, final Integer start, final Integer stop)
  {
<span class="nc" id="L138">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;nextIndexOf_from_to&quot;;</span>
<span class="nc" id="L139">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L140">    return (Integer)this.nextIndexOf_from_to_ifAbsent(element, start, stop, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L141">      return Negativity;</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer nextIndexOf_from_to_ifAbsent(final ElementType element, final Integer start, final Integer stop, final NiladicValuable noneBlock)
  {
<span class="nc" id="L150">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;nextIndexOf_from_to_ifAbsent&quot;;</span>
<span class="nc" id="L151">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L152">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L153">    start.to_do(stop, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L154">      Integer i = f2.getValue(0).value();</span>
<span class="nc" id="L155">      return (Integer)f0.exit(exitID, (this.at(i).equals(element)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L156">      return (Integer)f0.exit(exitID, i);</span>
    }, &quot;&quot;)));
    }, &quot;i&quot;));
<span class="nc" id="L159">    return (Integer)f0.exit(exitID, noneBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Integer prevIndexOf_from_to(final ElementType element, final Integer start, final Integer stop)
  {
<span class="nc" id="L168">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;prevIndexOf_from_to&quot;;</span>
<span class="nc" id="L169">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L170">    return (Integer)this.prevIndexOf_from_to_ifAbsent(element, start, stop, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L171">      return Negativity;</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer prevIndexOf_from_to_ifAbsent(final ElementType element, final Integer start, final Integer stop, final NiladicValuable noneBlock)
  {
<span class="nc" id="L180">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;prevIndexOf_from_to_ifAbsent&quot;;</span>
<span class="nc" id="L181">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L182">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L183">    start.to_by_do(stop, Negativity, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L184">      Integer i = f2.getValue(0).value();</span>
<span class="nc" id="L185">      return (Integer)f0.exit(exitID, (this.at(i).equals(element)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L186">      return (Integer)f0.exit(exitID, i);</span>
    }, &quot;&quot;)));
    }, &quot;i&quot;));
<span class="nc" id="L189">    return (Integer)f0.exit(exitID, noneBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   ElementType after(final ElementType leadingElement)
  {
<span class="nc" id="L198">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;after&quot;;</span>
<span class="nc" id="L199">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L200">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L201">    Integer index = this.nextIndexOf_from_to_ifAbsent(leadingElement, SmallInteger.from(1), this.size(), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L202">      this.elementNotFound();</span>
<span class="nc" id="L203">    return (ElementType)f0.exit(exitID, Zero);</span>
    }, &quot;&quot;));
<span class="nc" id="L205">    return (ElementType)f0.exit(exitID, this.at((index.plus(SmallInteger.from(1))).asInteger()));</span>
    });
  }

  /**
   * @return 
   */
  public   ElementType before(final ElementType trailingElement)
  {
<span class="nc" id="L214">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;before&quot;;</span>
<span class="nc" id="L215">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L216">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L217">    Integer index = this.prevIndexOf_from_to_ifAbsent(trailingElement, this.size(), SmallInteger.from(1), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L218">      this.elementNotFound();</span>
<span class="nc" id="L219">    return (ElementType)f0.exit(exitID, Zero);</span>
    }, &quot;&quot;));
<span class="nc" id="L221">    return (ElementType)f0.exit(exitID, this.at((index.minus(SmallInteger.from(1))).asInteger()));</span>
    });
  }

  /**
   * @return 
   */
  public   Integer indexOf(final ElementType element)
  {
<span class="nc" id="L230">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;indexOf&quot;;</span>
<span class="nc" id="L231">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L232">    return (Integer)this.indexOf_ifAbsent(element, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L233">      return Zero;</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer indexOf_ifAbsent(final ElementType element, final NiladicValuable noneBlock)
  {
<span class="nc" id="L242">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;indexOf_ifAbsent&quot;;</span>
<span class="nc" id="L243">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L244">    return (Integer)this.nextIndexOf_from_to_ifAbsent(element, SmallInteger.from(1), this.size(), noneBlock);</span>
  }

  /**
   * @return 
   */
  public   Integer indexOfSubCollection_startingAt(final CollectedReadably&lt;ElementType&gt; subCollection, final Ordinal anIndex)
  {
<span class="fc" id="L252">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;indexOfSubCollection_startingAt&quot;;</span>
<span class="fc" id="L253">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L254">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L255">    Ordinal subSize = subCollection.size();</span>

<span class="fc" id="L257">    FastInteger finalIndex = Zero.faster();</span>
<span class="fc" id="L258">    (Zero.lessThan(subSize)).and(Predicate.with(f2 -&gt; {</span>
<span class="fc" id="L259">      return Zero.plus(this.size()).notLess(anIndex);</span>
<span class="fc" id="L260">    }, &quot;&quot;)).ifTrue(Closure.with(f2 -&gt; {</span>
      
<span class="fc" id="L262">    SequencedCollection sub = ((SequencedCollection)subCollection);</span>

<span class="fc" id="L264">    Object firstSub = sub.at(Unity);</span>

<span class="fc" id="L266">    Interval range = Unity.max(anIndex).to(Unity.plus(this.size()).minus(subSize));</span>
<span class="fc" id="L267">    range.$do(Closure.with(f3 -&gt; {</span>
<span class="fc" id="L268">      Integer startIndex = f3.getValue(0).value();</span>
      
<span class="fc" id="L270">    Object nextItem = this.at(startIndex);</span>
<span class="fc" id="L271">    (nextItem.equals(firstSub)).ifTrue(Closure.with(f4 -&gt; {</span>
      
<span class="fc" id="L273">    FastInteger matchIndex = Duality.faster();</span>
<span class="fc" id="L274">    Predicate.with(f5 -&gt; {</span>
<span class="fc" id="L275">      return (matchIndex.notMore(subSize)).and(Predicate.with(f6 -&gt; {</span>
<span class="fc" id="L276">      return (this.at(startIndex.plus(matchIndex).minus(SmallInteger.from(1))).equals(sub.at(matchIndex)));</span>
    }, &quot;&quot;));
<span class="fc" id="L278">    }, &quot;&quot;).whileTrue(Closure.with(f5 -&gt; {</span>
<span class="fc" id="L279">      matchIndex.increment();</span>
<span class="fc" id="L280">    }, &quot;&quot;));</span>
<span class="fc" id="L281">    return (Integer)f0.exit(exitID, (matchIndex.notMore(subSize)).ifFalse(Closure.with(f5 -&gt; {</span>
<span class="fc" id="L282">      finalIndex.value(startIndex);</span>
<span class="fc" id="L283">    return (Integer)f0.exit(exitID, finalIndex.value());</span>
    }, &quot;&quot;)));
    }, &quot;&quot;));
<span class="fc" id="L286">    return (Integer)f0.exit(exitID, finalIndex.value());</span>
    }, &quot;startIndex&quot;));
<span class="fc" id="L288">    }, &quot;&quot;));</span>
<span class="fc" id="L289">    return (Integer)f0.exit(exitID, finalIndex.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Integer indexOfSubCollection_startingAt_ifAbsent(final CollectedReadably&lt;ElementType&gt; subCollection, final Ordinal anIndex, final NiladicValuable noneBlock)
  {
<span class="nc" id="L298">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;indexOfSubCollection_startingAt_ifAbsent&quot;;</span>
<span class="nc" id="L299">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L300">    Integer index = this.indexOfSubCollection_startingAt(subCollection, anIndex);</span>
<span class="nc bnc" id="L301" title="All 4 branches missed.">    return (Integer)(Boolean.primitiveValue((index.intValue() == Zero.intValue())) ? noneBlock.value() : index);</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; append(final CollectedReadably&lt;ElementType&gt; aCollection)
  {
<span class="nc" id="L309">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;append&quot;;</span>
<span class="nc" id="L310">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L311">    return (SequencedCollection&lt;ElementType&gt;)this.copyReplaceFrom_to_with((Unity.plus(this.size())), this.size(), aCollection);</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyRange(final Interval range)
  {
<span class="nc" id="L319">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyRange&quot;;</span>
<span class="nc" id="L320">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L321">    return (SequencedCollection&lt;ElementType&gt;)this.copyFrom_to(range.first(), range.last());</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyFrom_to(final Ordinal start, final Ordinal stop)
  {
<span class="fc" id="L329">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyFrom_to&quot;;</span>
<span class="fc" id="L330">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L331">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L332">    this.notEmpty().ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L333">      return (SequencedCollection&lt;ElementType&gt;)f0.exit(exitID, this.copy());</span>
    }, &quot;&quot;));

<span class="fc" id="L336">    Integer newSize = (Unity.plus((stop.minus(start))));</span>
<span class="fc" id="L337">    return (SequencedCollection&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="fc" id="L338">    SequencedCollection prime = (SequencedCollection)this.species().$new(newSize);</span>
<span class="fc" id="L339">    prime.replaceFrom_to_with_startingAt(Unity, newSize, this, start); </span>

<span class="fc" id="L341">    return prime.yourself();</span>
    });
    });
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyReplaceAll_with(final CollectedReadably&lt;ElementType&gt; oldElements, final CollectedReadably&lt;ElementType&gt; newElements)
  {
<span class="fc" id="L351">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyReplaceAll_with&quot;;</span>
<span class="fc" id="L352">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L353">    FastInteger oldIndex = Unity.faster();</span>

<span class="fc" id="L355">    FastInteger matchIndex = this.indexOfSubCollection_startingAt(oldElements, oldIndex).faster();</span>

<span class="fc" id="L357">    OrderedCollection&lt;Integer&gt; matchIndices = OrderedCollection.type().$new();</span>
<span class="fc" id="L358">    Predicate.with(f2 -&gt; {</span>
<span class="fc" id="L359">      return (Zero.lessThan(matchIndex));</span>
<span class="fc" id="L360">    }, &quot;&quot;).whileTrue(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L361">      matchIndices.addLast(matchIndex.value());</span>
<span class="fc" id="L362">    matchIndex.add(oldElements.size());</span>
<span class="fc" id="L363">    matchIndex.value(this.indexOfSubCollection_startingAt(oldElements, matchIndex.value()));</span>
<span class="fc" id="L364">    }, &quot;&quot;));</span>
<span class="fc" id="L365">    return (SequencedCollection&lt;ElementType&gt;)matchIndices.notEmpty().ifTrue_ifFalse(Closure.with(f2 -&gt; {</span>
      
<span class="fc" id="L367">    FastInteger newIndex = Unity.faster();</span>

<span class="fc" id="L369">    FastInteger newPlace = Zero.faster();</span>

<span class="fc" id="L371">    Integer newSize = (this.size().plus(((newElements.size().minus(oldElements.size())).times(matchIndices.size())))).asInteger();</span>

<span class="fc" id="L373">    OrderedCollection results = OrderedCollection.type().$new(newSize);</span>
<span class="fc" id="L374">    results.registerType(oldElements.first());</span>
<span class="fc" id="L375">    Predicate.with(f3 -&gt; {</span>
<span class="fc" id="L376">      return matchIndices.notEmpty();</span>
<span class="fc" id="L377">    }, &quot;&quot;).whileTrue(Closure.with(f3 -&gt; {</span>
<span class="fc" id="L378">      matchIndex.value(matchIndices.removeFirst());</span>
<span class="fc" id="L379">    newPlace.value(newIndex.plus(matchIndex).minus(oldIndex));</span>
<span class="fc" id="L380">    results.replaceFrom_to_with_startingAt(newIndex, (newPlace.plus(Negativity)), this, oldIndex);</span>
<span class="fc" id="L381">    oldIndex.value((matchIndex.value().plus(oldElements.size())).asInteger());</span>
<span class="fc" id="L382">    newIndex.value((newPlace.value().plus(newElements.size())).asInteger());</span>
<span class="fc" id="L383">    return results.replaceFrom_to_with_startingAt(newPlace, (newIndex.plus(Negativity)), newElements, Unity);</span>
    }, &quot;&quot;));
<span class="fc" id="L385">    results.replaceFrom_to_with_startingAt(newIndex.value(), results.size(), this, oldIndex.value());</span>
<span class="fc" id="L386">    return results;</span>
<span class="fc" id="L387">    }, &quot;&quot;), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L388">      return this.copy();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyReplaceFrom_to_with(final Ordinal start, final Ordinal stop, final CollectedReadably&lt;ElementType&gt; replacements)
  {
<span class="nc" id="L397">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyReplaceFrom_to_with&quot;;</span>
<span class="nc" id="L398">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L399">    Integer newSize = this.size().minus(Unity.plus(stop).minus(start)).plus(replacements.size()).asInteger();</span>

<span class="nc" id="L401">    Integer end = SmallInteger.from(start.minus(Unity).plus(replacements.size()));</span>
    {
<span class="nc" id="L403">    SequencedCollection prime = (SequencedCollection)this.species().$new(newSize);</span>
<span class="nc" id="L404">    prime.replaceFrom_to_with_startingAt(Unity, (start.minus(Unity)).asInteger(), this, Unity); </span>
<span class="nc" id="L405">    prime.replaceFrom_to_with_startingAt(start, end, replacements, Unity); </span>
<span class="nc" id="L406">    prime.replaceFrom_to_with_startingAt((Unity.plus(end)), newSize, this, (Unity.plus(stop))); </span>

<span class="nc" id="L408">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyReplaceFrom_to_withObject(final Ordinal start, final Ordinal stop, final ElementType replacement)
  {
<span class="nc" id="L417">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyReplaceFrom_to_withObject&quot;;</span>
<span class="nc" id="L418">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L419">    FastInteger size = (((Integer)stop).minus(start)).asSmallInteger().faster();</span>
<span class="nc" id="L420">    (size.lessThan(SmallInteger.from(0))).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L421">      return size.subtract(size);</span>
    }, &quot;&quot;));
<span class="nc" id="L423">    size.add(Unity);</span>

<span class="nc" id="L425">    Array replacements = Array.type().$new(size);</span>
<span class="nc" id="L426">    replacements.atAllPut(replacement);</span>
<span class="nc" id="L427">    return (SequencedCollection&lt;ElementType&gt;)this.copyReplaceFrom_to_with(start, stop, replacements);</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyWith(final ElementType newElement)
  {
<span class="fc" id="L435">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyWith&quot;;</span>
<span class="fc" id="L436">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L437">    Integer newSize = (Unity.plus(this.size()));</span>
    {
<span class="fc" id="L439">    SequencedCollection prime = (SequencedCollection)this.species().$new(newSize);</span>
<span class="fc" id="L440">    prime.at_put(newSize, newElement); </span>
<span class="fc" id="L441">    prime.replaceFrom_to_with_startingAt(Unity, this.size(), this, Unity); </span>

<span class="fc" id="L443">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyWithout(final ElementType oldElement)
  {
<span class="fc" id="L452">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyWithout&quot;;</span>
<span class="fc" id="L453">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L454">    OrderedCollection copy = ((OrderedCollection)this.species().$new(this.size()).asOrderedCollection());</span>

<span class="fc" id="L456">    WriteStream aStream = WriteStream.type().with(copy.registerType(oldElement));</span>
<span class="fc" id="L457">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L458">      ElementType element = f2.getValue(0).value();</span>
<span class="fc" id="L459">      return (oldElement.equals(element)).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="fc" id="L460">      return aStream.nextPut(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="fc" id="L463">    return (SequencedCollection&lt;ElementType&gt;)((SequencedCollection)aStream.contents());</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; copyReplacing_withObject(final ElementType oldElement, final ElementType newElement)
  {
<span class="fc" id="L471">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;copyReplacing_withObject&quot;;</span>
<span class="fc" id="L472">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L473">    return (SequencedCollection&lt;ElementType&gt;)this.collect(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L474">      ElementType each = f2.getValue(0).value();</span>
<span class="fc bfc" id="L475" title="All 2 branches covered.">      return (Boolean.primitiveValue(each.equals(oldElement)) ? newElement : each);</span>
    }, &quot;each&quot;));
  }

  /**
   * @return 
   */
  public   SequencedCollection&lt;ElementType&gt; reverse()
  {
<span class="fc" id="L484">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;reverse&quot;;</span>
<span class="fc" id="L485">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L486">    OrderedCollection results = OrderedCollection.type().$new(this.size());</span>
<span class="fc" id="L487">    this.reverseDo(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L488">      ElementType element = f2.getValue(0).value();</span>
<span class="fc" id="L489">      return results.add(element);</span>
    }, &quot;element&quot;));
<span class="fc" id="L491">    return (SequencedCollection&lt;ElementType&gt;)results;</span>
  }

  /**
   * @return 
   */
  @Override public   SequencedCollection&lt;ElementType&gt; collect(final MonadicValuable filterBlock)
  {
<span class="fc" id="L499">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;collect&quot;;</span>
<span class="fc" id="L500">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L501">    OrderedCollection results = OrderedCollection.type().$new(this.size());</span>
<span class="fc" id="L502">    Unity.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="fc" id="L503">      Integer index = f2.getValue(0).value();</span>
<span class="fc" id="L504">      return results.at_put(index, ((Object)filterBlock.value(this.at(index))));</span>
    }, &quot;index&quot;));
<span class="fc" id="L506">    return (SequencedCollection&lt;ElementType&gt;)results;</span>
  }

  /**
   * @return 
   */
  @Override public   Integer findFirst(final MonadicPredicate testBlock)
  {
<span class="nc" id="L514">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;findFirst&quot;;</span>
<span class="nc" id="L515">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L516">    return (Integer)this.findFirst_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L517">      return Zero;</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  @Override public   Integer findFirst_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable noneBlock)
  {
<span class="nc" id="L526">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;findFirst_ifAbsent&quot;;</span>
<span class="nc" id="L527">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L528">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L529">    Unity.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L530">      Integer index = f2.getValue(0).value();</span>
<span class="nc" id="L531">      return (Integer)f0.exit(exitID, testBlock.value(this.at(index)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L532">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;)));
    }, &quot;index&quot;));
<span class="nc" id="L535">    return (Integer)f0.exit(exitID, noneBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  @Override public   Integer findLast(final MonadicPredicate testBlock)
  {
<span class="nc" id="L544">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;findLast&quot;;</span>
<span class="nc" id="L545">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L546">    return (Integer)this.findLast_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L547">      return Zero;</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  @Override public   Integer findLast_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable noneBlock)
  {
<span class="nc" id="L556">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;findLast_ifAbsent&quot;;</span>
<span class="nc" id="L557">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L558">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L559">    this.size().to_by_do(Unity, Negativity, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L560">      Integer index = f2.getValue(0).value();</span>
<span class="nc" id="L561">      return (Integer)f0.exit(exitID, testBlock.value(this.at(index)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L562">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;)));
    }, &quot;index&quot;));
<span class="nc" id="L565">    return (Integer)f0.exit(exitID, noneBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   SequencedCollection from_to_do(final Ordinal start, final Ordinal stop, final MonadicValuable aBlock)
  {
<span class="nc" id="L574">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;from_to_do&quot;;</span>
<span class="nc" id="L575">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L576">    start.to_do(stop, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L577">      Integer i = f2.getValue(0).value();</span>
<span class="nc" id="L578">      return aBlock.value(this.at(i));</span>
    }, &quot;i&quot;));
<span class="nc" id="L580">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection from_to_keysAndValuesDo(final Ordinal start, final Ordinal stop, final DyadicValuable aBlock)
  {
<span class="nc" id="L588">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;from_to_keysAndValuesDo&quot;;</span>
<span class="nc" id="L589">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L590">    start.to_do(stop, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L591">      Integer i = f2.getValue(0).value();</span>
<span class="nc" id="L592">      return aBlock.value_value(this.at(i), i);</span>
    }, &quot;i&quot;));
<span class="nc" id="L594">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection keysAndValuesDo(final DyadicValuable aBlock)
  {
<span class="nc" id="L602">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;keysAndValuesDo&quot;;</span>
<span class="nc" id="L603">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L604">    this.from_to_keysAndValuesDo(Unity, this.size(), aBlock);</span>
<span class="nc" id="L605">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  @Override public   SequencedCollection $do(final MonadicValuable aBlock)
  {
<span class="fc" id="L613">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;$do&quot;;</span>
<span class="fc" id="L614">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L615">    Unity.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="fc" id="L616">      Integer i = f2.getValue(0).value();</span>
<span class="fc" id="L617">      return aBlock.value(this.at(i));</span>
    }, &quot;i&quot;));
<span class="fc" id="L619">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  @Override public   SequencedCollection do_separatedBy(final MonadicValuable aBlock, final NiladicValuable separateBlock)
  {
<span class="nc" id="L627">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;do_separatedBy&quot;;</span>
<span class="nc" id="L628">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L629">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L630">    this.notEmpty().ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L631">      return (SequencedCollection)f0.exit(exitID, this);</span>
    }, &quot;&quot;));
<span class="nc" id="L633">    aBlock.value(this.at(SmallInteger.from(1)));</span>
<span class="nc" id="L634">    Duality.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L635">      Integer i = f2.getValue(0).value();</span>
<span class="nc" id="L636">      separateBlock.value();</span>
<span class="nc" id="L637">    return aBlock.value(this.at(i));</span>
    }, &quot;i&quot;));
<span class="nc" id="L639">    return (SequencedCollection)this;</span>
    });
  }

  /**
   * @return 
   */
  @Override public   SequencedCollection reverseDo(final MonadicValuable aBlock)
  {
<span class="fc" id="L648">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;reverseDo&quot;;</span>
<span class="fc" id="L649">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L650">    this.size().to_by_do(Unity, Negativity, Closure.with(f2 -&gt; {</span>
<span class="fc" id="L651">      Integer i = f2.getValue(0).value();</span>
<span class="fc" id="L652">      return aBlock.value(this.at(i));</span>
    }, &quot;i&quot;));
<span class="fc" id="L654">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection with_do(final CollectedReadably&lt;ElementType&gt; aCollection, final DyadicValuable aBlock)
  {
<span class="fc" id="L662">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;with_do&quot;;</span>
<span class="fc" id="L663">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L664">    (this.size().equals(aCollection.size())).ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L665">      this.error(String.from(&quot;Collections are of different sizes&quot;));</span>
<span class="nc" id="L666">    }, &quot;&quot;));</span>
<span class="fc" id="L667">    Unity.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="fc" id="L668">      Integer index = f2.getValue(0).value();</span>
<span class="fc" id="L669">      return aBlock.value_value(this.at(index), aCollection.at(index));</span>
    }, &quot;index&quot;));
<span class="fc" id="L671">    return (SequencedCollection)this;</span>
  }

  /**
   * @return 
   */
  public   ReadStream&lt;ElementType&gt; readStream()
  {
<span class="nc" id="L679">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;readStream&quot;;</span>
<span class="nc" id="L680">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L681">    return (ReadStream&lt;ElementType&gt;)ReadStream.type().on(this);</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean equals(final Collected&lt;ElementType&gt; aCollection)
  {
<span class="nc" id="L689">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;equals&quot;;</span>
<span class="nc" id="L690">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L691">    return (Boolean)SequencedCollection.type().accepts(aCollection).and(Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L692">      return this.equals(((CollectedReadably)aCollection));</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Boolean equals(final CollectedReadably&lt;ElementType&gt; aCollection)
  {
<span class="fc" id="L701">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;equals&quot;;</span>
<span class="fc" id="L702">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L703">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L704">    (this.size().equals(aCollection.size())).ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L705">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="fc" id="L707">    this.with_do(aCollection, Closure.with(f2 -&gt; {</span>
<span class="fc" id="L708">      ElementType a = f2.getValue(0).value();</span>
<span class="fc" id="L709">      ElementType b = f2.getValue(1).value();</span>
<span class="fc" id="L710">      (a.equals(b)).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L711">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="fc" id="L713">    }, &quot;a&quot;, &quot;b&quot;));</span>
<span class="fc" id="L714">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean includesIndex(final Ordinal index)
  {
<span class="nc" id="L723">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;includesIndex&quot;;</span>
<span class="nc" id="L724">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L725">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L726">    (index.lessThan(Zero)).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L727">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="nc" id="L729">    return (Boolean)f0.exit(exitID, Boolean.from((index.lessThan(this.size()))));</span>
    });
  }

  /**
   * @return 
   */
  public   ElementType atAllPut(final ElementType element)
  {
<span class="nc" id="L738">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;atAllPut&quot;;</span>
<span class="nc" id="L739">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L740">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   ElementType at_put(final Ordinal index, final ElementType element)
  {
<span class="nc" id="L748">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;at_put&quot;;</span>
<span class="nc" id="L749">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L750">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   ElementType atAll_put(final CollectedReadably&lt;Ordinal&gt; index, final ElementType element)
  {
<span class="nc" id="L758">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;atAll_put&quot;;</span>
<span class="nc" id="L759">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L760">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  protected   Interval replacedRange_from_at(final Interval range, final CollectedReadably&lt;ElementType&gt; replacements, final Integer origin)
  {
<span class="fc" id="L768">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;replacedRange_from_at&quot;;</span>
<span class="fc" id="L769">    Frame f0 = new Frame(exitID);</span>
<span class="pc bpc" id="L770" title="1 of 2 branches missed.">    if (!(this.isSame(replacements).primitiveBoolean())) {</span>
<span class="fc" id="L771">      return range;</span>
    };
<span class="nc bnc" id="L773" title="All 2 branches missed.">    if (!((origin.intValue() &lt; range.first().intValue()))) {</span>
<span class="nc" id="L774">      return range;</span>
    };
<span class="nc" id="L776">    return (Interval)range.reverse();</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection replaceFrom_to_with_startingAt(final Ordinal start, final Ordinal stop, final CollectedReadably&lt;ElementType&gt; replacements, final Ordinal origin)
  {
<span class="fc" id="L784">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;replaceFrom_to_with_startingAt&quot;;</span>
<span class="fc" id="L785">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L786">    Integer offset = (((Integer)origin).minus(((Integer)start)));</span>

<span class="fc" id="L788">    Interval range = ((Integer)start).to_by(((Integer)stop), Unity);</span>

<span class="fc" id="L790">     range = this.replacedRange_from_at(range, replacements, ((Integer)origin));</span>
<span class="fc" id="L791">    range.$do(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L792">      Integer i = f2.getValue(0).value();</span>
<span class="fc" id="L793">      return this.at_put(i, replacements.at((i.plus(offset))));</span>
    }, &quot;i&quot;));
<span class="fc" id="L795">    return (SequencedCollection)replacements;</span>
  }

  /**
   * @return 
   */
  public   SequencedCollection replaceFrom_to_with(final Ordinal start, final Ordinal stop, final CollectedReadably&lt;ElementType&gt; replacements)
  {
<span class="nc" id="L803">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;replaceFrom_to_with&quot;;</span>
<span class="nc" id="L804">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L805">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L806">    (replacements.size().isSame(stop.minus(start).plus(SmallInteger.from(1)))).ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L807">      this.error(String.from(&quot;size of replacement incorrect&quot;));</span>
<span class="nc" id="L808">    return (SequencedCollection)f0.exit(exitID, replacements);</span>
    }, &quot;&quot;));
<span class="nc" id="L810">    return (SequencedCollection)f0.exit(exitID, this.replaceFrom_to_with_startingAt(start, stop, replacements, Unity));</span>
    });
  }

  /**
   * @return 
   */
  public   ElementType replaceFrom_to_withObject(final Ordinal start, final Ordinal stop, final ElementType element)
  {
<span class="nc" id="L819">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;replaceFrom_to_withObject&quot;;</span>
<span class="nc" id="L820">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L821">    Unity.to_do(this.size(), Closure.with(f2 -&gt; {</span>
<span class="nc" id="L822">      Integer index = f2.getValue(0).value();</span>
<span class="nc" id="L823">      return this.at_put(index, element);</span>
    }, &quot;index&quot;));
<span class="nc" id="L825">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   ElementType addFirst(final ElementType element)
  {
<span class="nc" id="L833">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addFirst&quot;;</span>
<span class="nc" id="L834">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L835">    this.add_beforeIndex(element, Unity);</span>
<span class="nc" id="L836">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   ElementType addLast(final ElementType element)
  {
<span class="fc" id="L844">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addLast&quot;;</span>
<span class="fc" id="L845">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L846">    this.add(element);</span>
<span class="fc" id="L847">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   Collected&lt;ElementType&gt; addAll(final Collected&lt;ElementType&gt; elements)
  {
<span class="fc" id="L855">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAll&quot;;</span>
<span class="fc" id="L856">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L857">    elements.$do(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L858">      ElementType element = f2.getValue(0).value();</span>
<span class="fc" id="L859">      return this.add(element);</span>
    }, &quot;element&quot;));
<span class="fc" id="L861">    return (Collected&lt;ElementType&gt;)elements;</span>
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAllFirst(final CollectedReadably&lt;ElementType&gt; elements)
  {
<span class="nc" id="L869">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAllFirst&quot;;</span>
<span class="nc" id="L870">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L871">    elements.reverseDo(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L872">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L873">      return this.addFirst(element);</span>
    }, &quot;element&quot;));
<span class="nc" id="L875">    return (CollectedReadably&lt;ElementType&gt;)elements;</span>
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAllLast(final CollectedReadably&lt;ElementType&gt; elements)
  {
<span class="nc" id="L883">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAllLast&quot;;</span>
<span class="nc" id="L884">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L885">    elements.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L886">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L887">      return this.addLast(element);</span>
    }, &quot;element&quot;));
<span class="nc" id="L889">    return (CollectedReadably&lt;ElementType&gt;)elements;</span>
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAll_after(final CollectedReadably&lt;ElementType&gt; elements, final ElementType target)
  {
<span class="nc" id="L897">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAll_after&quot;;</span>
<span class="nc" id="L898">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L899">    return (CollectedReadably&lt;ElementType&gt;)this.addAll_afterIndex(elements, this.indexOf_ifAbsent(target, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L900">      this.elementNotFound();</span>
<span class="nc" id="L901">    }, &quot;&quot;)));</span>
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAll_afterIndex(final CollectedReadably&lt;ElementType&gt; elements, final Ordinal index)
  {
<span class="nc" id="L909">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAll_afterIndex&quot;;</span>
<span class="nc" id="L910">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L911">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L912">    elements.inject_into(index, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L913">      Ordinal i = f2.getValue(0).value();</span>
<span class="nc" id="L914">      ElementType e = f2.getValue(1).value();</span>
<span class="nc" id="L915">      this.add_afterIndex(e, i);</span>
<span class="nc" id="L916">    return (CollectedReadably&lt;ElementType&gt;)f0.exit(exitID, (i.plus(Unity)));</span>
    }, &quot;i&quot;, &quot;e&quot;));
<span class="nc" id="L918">    return (CollectedReadably&lt;ElementType&gt;)f0.exit(exitID, elements);</span>
    });
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAll_before(final CollectedReadably&lt;ElementType&gt; elements, final ElementType target)
  {
<span class="nc" id="L927">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAll_before&quot;;</span>
<span class="nc" id="L928">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L929">    return (CollectedReadably&lt;ElementType&gt;)this.addAll_beforeIndex(elements, this.indexOf_ifAbsent(target, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L930">      return this.elementNotFound();</span>
    }, &quot;&quot;)));
  }

  /**
   * @return 
   */
  public   CollectedReadably&lt;ElementType&gt; addAll_beforeIndex(final CollectedReadably&lt;ElementType&gt; elements, final Ordinal index)
  {
<span class="nc" id="L939">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;addAll_beforeIndex&quot;;</span>
<span class="nc" id="L940">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L941">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L942">    elements.inject_into(index, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L943">      Ordinal i = f2.getValue(0).value();</span>
<span class="nc" id="L944">      ElementType e = f2.getValue(1).value();</span>
<span class="nc" id="L945">      this.add_beforeIndex(e, i);</span>
<span class="nc" id="L946">    return (CollectedReadably&lt;ElementType&gt;)f0.exit(exitID, (i.plus(Unity)));</span>
    }, &quot;i&quot;, &quot;e&quot;));
<span class="nc" id="L948">    return (CollectedReadably&lt;ElementType&gt;)f0.exit(exitID, elements);</span>
    });
  }

  /**
   * @return 
   */
  public   ElementType add_after(final ElementType element, final ElementType target)
  {
<span class="nc" id="L957">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;add_after&quot;;</span>
<span class="nc" id="L958">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L959">    return (ElementType)this.add_afterIndex(element, this.indexOf_ifAbsent(target, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L960">      this.elementNotFound();</span>
<span class="nc" id="L961">    return Nil.literal();</span>
    }, &quot;&quot;)));
  }

  /**
   * @return 
   */
  public   ElementType add_afterIndex(final ElementType element, final Ordinal index)
  {
<span class="nc" id="L970">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;add_afterIndex&quot;;</span>
<span class="nc" id="L971">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L972">    int i = this.checkRange((Unity.plus(index)));</span>
<span class="nc" id="L973">    this.registerType(((Object)element));</span>
<span class="nc" id="L974">    this.add_at(element, i);</span>
<span class="nc" id="L975">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   ElementType add_before(final ElementType element, final ElementType target)
  {
<span class="nc" id="L983">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;add_before&quot;;</span>
<span class="nc" id="L984">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L985">    return (ElementType)this.add_beforeIndex(element, this.indexOf_ifAbsent(target, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L986">      this.elementNotFound();</span>
<span class="nc" id="L987">    return Nil.literal();</span>
    }, &quot;&quot;)));
  }

  /**
   * @return 
   */
  public   ElementType add_beforeIndex(final ElementType element, final Ordinal index)
  {
<span class="nc" id="L996">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;add_beforeIndex&quot;;</span>
<span class="nc" id="L997">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L998">    int i = this.checkRange(index);</span>
<span class="nc" id="L999">    this.registerType(((Object)element));</span>
<span class="nc" id="L1000">    this.add_at(element, i);</span>
<span class="nc" id="L1001">    return (ElementType)element;</span>
  }

  /**
   * @return 
   */
  public   Collected&lt;ElementType&gt; removeAll(final Collected&lt;ElementType&gt; elements)
  {
<span class="nc" id="L1009">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;removeAll&quot;;</span>
<span class="nc" id="L1010">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L1011">    elements.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L1012">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L1013">      return this.remove(element);</span>
    }, &quot;element&quot;));
<span class="nc" id="L1015">    return (Collected&lt;ElementType&gt;)elements;</span>
  }

  /**
   * @return 
   */
  public   ElementType remove(final ElementType element)
  {
<span class="nc" id="L1023">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;remove&quot;;</span>
<span class="nc" id="L1024">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L1025">    return (ElementType)this.remove_ifAbsent(element, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L1026">      this.elementNotFound();</span>
<span class="nc" id="L1027">    return Nil.literal();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   ElementType remove_ifAbsent(final ElementType element, final NiladicValuable aBlock)
  {
<span class="nc" id="L1036">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;remove_ifAbsent&quot;;</span>
<span class="nc" id="L1037">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L1038">    return (ElementType)this.removeAtIndex(this.indexOf_ifAbsent(element, aBlock));</span>
  }

  /**
   * @return 
   */
  public   OrderedCollection&lt;ElementType&gt; removeAllSuchThat(final MonadicPredicate criteria)
  {
<span class="nc" id="L1046">    java.lang.String exitID = &quot;SequencedCollection&gt;&gt;removeAllSuchThat&quot;;</span>
<span class="nc" id="L1047">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L1048">    OrderedCollection&lt;ElementType&gt; results = OrderedCollection.type().$new();</span>
<span class="nc" id="L1049">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L1050">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L1051">      return criteria.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L1052">      results.add(element);</span>
<span class="nc" id="L1053">    this.remove(element);</span>
<span class="nc" id="L1054">    }, &quot;&quot;));</span>
    }, &quot;element&quot;));
<span class="nc" id="L1056">    return (OrderedCollection&lt;ElementType&gt;)results;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>