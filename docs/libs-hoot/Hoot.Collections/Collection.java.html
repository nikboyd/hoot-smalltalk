<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Collection.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">libs-hoot</a> &gt; <a href="index.source.html" class="el_package">Hoot.Collections</a> &gt; <span class="el_source">Collection.java</span></div><h1>Collection.java</h1><pre class="source lang-java linenums">/**
* Copyright 2010,2021 Nikolas S Boyd.
Permission is granted to copy this work provided this copyright statement is retained in all copies.

*/
package Hoot.Collections;

import Hoot.Runtime.Functions.*;
import Hoot.Runtime.Faces.*;
import Hoot.Runtime.Values.*;
import Hoot.Runtime.Blocks.*;
import Smalltalk.Core.*;
import Smalltalk.Blocks.*;
import Hoot.Behaviors.*;
import Hoot.Behaviors.Nil;
import Hoot.Behaviors.Object;
import Hoot.Behaviors.True;
import Hoot.Behaviors.False;
import Hoot.Behaviors.Boolean;
import Hoot.Magnitudes.*;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.Character;
import Hoot.Magnitudes.Float;
import Hoot.Magnitudes.Double;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.FastInteger;
import static Hoot.Magnitudes.SmallInteger.*;
import Smalltalk.Magnitudes.Ordinal;
import Smalltalk.Collections.*;
import Smalltalk.Core.Subject;
import Smalltalk.Core.Classified;
import java.util.List;

<span class="fc" id="L34">public abstract class Collection&lt;ElementType extends Object&gt; extends Object implements CollectedVariably&lt;ElementType&gt;</span>
{

<span class="nc" id="L37">  public static Metaclass type() { return (Metaclass)Metaclass.$class; }</span>
<span class="nc" id="L38">  @Override public Metaclass $class() { return (Metaclass)Metaclass.$class; }</span>
  public static class Metaclass extends Object.Metaclass implements CollectedVariably.Metatype
  {
<span class="fc" id="L41">    static final Collection.Metaclass $class = new Collection.Metaclass();</span>
    public Metaclass() {
<span class="fc" id="L43">      this(Collection.Metaclass.class);</span>
<span class="fc" id="L44">    }</span>

    public Metaclass(java.lang.Class aClass) {
<span class="fc" id="L47">      super(aClass);</span>
<span class="fc" id="L48">    }</span>

<span class="fc" id="L50">    @Override public java.lang.Class outerClass() { return Collection.class; }</span>


    /**
     * @return 
     */
    @Override public   Collection $new()
    {
<span class="nc" id="L58">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L59">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L60">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L61">      return (Collection)f0.exit(exitID, this.$new(SmallInteger.from(10)));</span>
      });
    }

    /**
     * @return 
     */
    @Override public   Collection $new(final Ordinal capacity)
    {
<span class="nc" id="L70">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L71">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L72">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L73">      return (Collection)f0.exit(exitID, new OrderedCollection(capacity));</span>
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with(final ElementType a)
    {
<span class="fc" id="L82">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with&quot;;</span>
<span class="fc" id="L83">      Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L84">      return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L85">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="fc" id="L86">      Collection prime = (Collection)this.$new();</span>
<span class="fc" id="L87">      prime.add(((Object)a)); </span>

<span class="fc" id="L89">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with(final ElementType a, final ElementType b)
    {
<span class="nc" id="L99">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with&quot;;</span>
<span class="nc" id="L100">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L101">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L102">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L103">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L104">      prime.add(((Object)a)); </span>
<span class="nc" id="L105">      prime.add(((Object)b)); </span>

<span class="nc" id="L107">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with(final ElementType a, final ElementType b, final ElementType c)
    {
<span class="nc" id="L117">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with&quot;;</span>
<span class="nc" id="L118">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L119">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L120">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L121">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L122">      prime.add(((Object)a)); </span>
<span class="nc" id="L123">      prime.add(((Object)b)); </span>
<span class="nc" id="L124">      prime.add(((Object)c)); </span>

<span class="nc" id="L126">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with_with(final ElementType a, final ElementType b, final ElementType c, final ElementType d)
    {
<span class="nc" id="L136">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with_with&quot;;</span>
<span class="nc" id="L137">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L138">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L139">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L140">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L141">      prime.add(((Object)a)); </span>
<span class="nc" id="L142">      prime.add(((Object)b)); </span>
<span class="nc" id="L143">      prime.add(((Object)c)); </span>
<span class="nc" id="L144">      prime.add(((Object)d)); </span>

<span class="nc" id="L146">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; withAll(final CollectedReadably&lt;ElementType&gt; elements)
    {
<span class="fc" id="L156">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;withAll&quot;;</span>
<span class="fc" id="L157">      Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L158">      return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L159">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="fc" id="L160">      Collection prime = (Collection)this.$new();</span>
<span class="fc" id="L161">      prime.addAll(elements); </span>

<span class="fc" id="L163">      return prime.yourself();</span>
      });
      });
    }
  }


<span class="fc" id="L170">    protected Classified elementType = Object.type();</span>
<span class="fc" id="L171">    public Classified elementType() { return this.elementType; }</span>
<span class="nc" id="L172">    public Object getElementType() { return (Object)this.elementType; }</span>

<span class="nc" id="L174">    public Collection elementType(Classified value) { this.elementType = value; return this; }</span>
<span class="nc" id="L175">    public void setElementType(Object value) { this.elementType = (Classified)value; }</span>

  ;

  /**
   * @return 
   */
  public   Collection rehash()
  {
<span class="nc" id="L184">    java.lang.String exitID = &quot;Collection&gt;&gt;rehash&quot;;</span>
<span class="nc" id="L185">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L186">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Integer capacity()
  {
<span class="nc" id="L194">    java.lang.String exitID = &quot;Collection&gt;&gt;capacity&quot;;</span>
<span class="nc" id="L195">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L196">    return (Integer)this.size();</span>
  }

  /**
   * @return 
   */
  public   int primitiveSize()
  {
<span class="fc" id="L204">    java.lang.String exitID = &quot;Collection&gt;&gt;primitiveSize&quot;;</span>
<span class="fc" id="L205">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L206">    return (int)this.size().primitiveInteger();</span>
  }

  /**
   * @return 
   */
  public   Integer size()
  {
<span class="nc" id="L214">    java.lang.String exitID = &quot;Collection&gt;&gt;size&quot;;</span>
<span class="nc" id="L215">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L216">    FastInteger tally = Zero.asFastInteger();</span>
<span class="nc" id="L217">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L218">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L219">      tally.add(Unity);</span>
<span class="nc" id="L220">    }, &quot;element&quot;));</span>
<span class="nc" id="L221">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  public   Integer occurrencesOf(final Subject candidate)
  {
<span class="nc" id="L229">    java.lang.String exitID = &quot;Collection&gt;&gt;occurrencesOf&quot;;</span>
<span class="nc" id="L230">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L231">    FastInteger tally = Zero.asFastInteger();</span>
<span class="nc" id="L232">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L233">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L234">      return (candidate.equals(element)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L235">      tally.add(Unity);</span>
<span class="nc" id="L236">    }, &quot;&quot;));</span>
    }, &quot;element&quot;));
<span class="nc" id="L238">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  @Override public   java.lang.String toString()
  {
<span class="fc" id="L246">    java.lang.String exitID = &quot;Collection&gt;&gt;toString&quot;;</span>
<span class="fc" id="L247">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L248">    return (java.lang.String)this.printString().primitiveString();</span>
  }

  /**
   * @return 
   */
  @Override public   String printString()
  {
<span class="fc" id="L256">    java.lang.String exitID = &quot;Collection&gt;&gt;printString&quot;;</span>
<span class="fc" id="L257">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L258">    return (String)String.from(this.asList().toString());</span>
  }

  /**
   * @return 
   */
  public   List&lt;ElementType&gt; asList()
  {
<span class="nc" id="L266">    java.lang.String exitID = &quot;Collection&gt;&gt;asList&quot;;</span>
<span class="nc" id="L267">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L268">    return (List&lt;ElementType&gt;)this.asOrderedCollection().asList();</span>
  }

  /**
   * @return 
   */
  public   CollectedArray&lt;ElementType&gt; asArray()
  {
<span class="nc" id="L276">    java.lang.String exitID = &quot;Collection&gt;&gt;asArray&quot;;</span>
<span class="nc" id="L277">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L278">    Array result = Array.type().$new(this.size());</span>

<span class="nc" id="L280">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L281">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L282">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L283">      result.at_put(index, element);</span>
<span class="nc" id="L284">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L285">    }, &quot;element&quot;));</span>
<span class="nc" id="L286">    return (CollectedArray&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedBaggage&lt;ElementType&gt; asBag()
  {
<span class="fc" id="L294">    java.lang.String exitID = &quot;Collection&gt;&gt;asBag&quot;;</span>
<span class="fc" id="L295">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L297">    Bag prime = (Bag)Bag.type().$new(this.size());</span>
<span class="fc" id="L298">    prime.addAll(this); </span>

<span class="fc" id="L300">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedOrdinally&lt;ElementType&gt; asOrderedCollection()
  {
<span class="fc" id="L309">    java.lang.String exitID = &quot;Collection&gt;&gt;asOrderedCollection&quot;;</span>
<span class="fc" id="L310">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L311">    OrderedCollection result = OrderedCollection.type().$new(this.size());</span>
<span class="fc" id="L312">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L313">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L314">      return result.addLast(element);</span>
    }, &quot;element&quot;));
<span class="fc" id="L316">    return (CollectedOrdinally&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedDistinctly&lt;ElementType&gt; asSet()
  {
<span class="nc" id="L324">    java.lang.String exitID = &quot;Collection&gt;&gt;asSet&quot;;</span>
<span class="nc" id="L325">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L327">    Set prime = (Set)Set.type().$new(this.size());</span>
<span class="nc" id="L328">    prime.addAll(this); </span>

<span class="nc" id="L330">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; sorted()
  {
<span class="fc" id="L339">    java.lang.String exitID = &quot;Collection&gt;&gt;sorted&quot;;</span>
<span class="fc" id="L340">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L341">    return (CollectedSortably&lt;ElementType&gt;)this.asSortedCollection();</span>
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection()
  {
<span class="fc" id="L349">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="fc" id="L350">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L352">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="fc" id="L353">    prime.addAll(this); </span>

<span class="fc" id="L355">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection(final DyadicPredicate sortBlock)
  {
<span class="nc" id="L364">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="nc" id="L365">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L367">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="nc" id="L368">    prime.sortBlock(sortBlock); </span>
<span class="nc" id="L369">    prime.addAll(this); </span>

<span class="nc" id="L371">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  @Override public   Collection $do(final MonadicValuable aBlock)
  {
<span class="nc" id="L380">    java.lang.String exitID = &quot;Collection&gt;&gt;$do&quot;;</span>
<span class="nc" id="L381">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L382">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection reverseDo(final MonadicValuable aBlock)
  {
<span class="nc" id="L390">    java.lang.String exitID = &quot;Collection&gt;&gt;reverseDo&quot;;</span>
<span class="nc" id="L391">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L392">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType collect(final MonadicValuable transformBlock)
  {
<span class="nc" id="L400">    java.lang.String exitID = &quot;Collection&gt;&gt;collect&quot;;</span>
<span class="nc" id="L401">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L402">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L403">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L404">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L405">      return result.add(transformBlock.value(element));</span>
    }, &quot;element&quot;));
<span class="nc" id="L407">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   ElementType detect(final MonadicPredicate testBlock)
  {
<span class="nc" id="L415">    java.lang.String exitID = &quot;Collection&gt;&gt;detect&quot;;</span>
<span class="nc" id="L416">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L417">    return (ElementType)this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L418">      this.elementNotFound();</span>
<span class="nc" id="L419">    return Nil.literal();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   ElementType detect_ifNone(final MonadicPredicate testBlock, final NiladicValuable missingBlock)
  {
<span class="nc" id="L428">    java.lang.String exitID = &quot;Collection&gt;&gt;detect_ifNone&quot;;</span>
<span class="nc" id="L429">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L430">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L431">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L432">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L433">      return (ElementType)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L434">      return (ElementType)f0.exit(exitID, element);</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L437">    return (ElementType)f0.exit(exitID, missingBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Collection do_separatedBy(final MonadicValuable aBlock, final NiladicValuable betweenBlock)
  {
<span class="nc" id="L446">    java.lang.String exitID = &quot;Collection&gt;&gt;do_separatedBy&quot;;</span>
<span class="nc" id="L447">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L448">    Boolean betweenElements = False.literal() ; f0.bind(&quot;betweenElements&quot;, betweenElements);</span>
<span class="nc" id="L449">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L450">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L451">      f0.getValue(&quot;betweenElements&quot;, Boolean.class).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L452">      betweenBlock.value();</span>
<span class="nc" id="L453">    }, &quot;&quot;));</span>
<span class="nc" id="L454">    aBlock.value(element);</span>
<span class="nc" id="L455">    ; f0.bind(&quot;betweenElements&quot;, f0.getValue(&quot;betweenElements&quot;, Boolean.class).not());</span>
<span class="nc" id="L456">    }, &quot;element&quot;));</span>
<span class="nc" id="L457">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;ResultType extends Subject&gt; ResultType inject_into(final ResultType value, final DyadicValuable binaryBlock)
  {
<span class="nc" id="L465">    java.lang.String exitID = &quot;Collection&gt;&gt;inject_into&quot;;</span>
<span class="nc" id="L466">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L467">    Subject result = value ; f0.bind(&quot;result&quot;, result);</span>
<span class="nc" id="L468">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L469">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L470">      ; f0.bind(&quot;result&quot;, binaryBlock.value_value(f0.getValue(&quot;result&quot;, Subject.class), element));</span>
<span class="nc" id="L471">    }, &quot;element&quot;));</span>
<span class="nc" id="L472">    return (ResultType)((ResultType)f0.getValue(&quot;result&quot;, Subject.class));</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType reject(final MonadicPredicate testBlock)
  {
<span class="nc" id="L480">    java.lang.String exitID = &quot;Collection&gt;&gt;reject&quot;;</span>
<span class="nc" id="L481">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L482">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L483">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L484">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L485">      return testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L486">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L489">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType select(final MonadicPredicate testBlock)
  {
<span class="nc" id="L497">    java.lang.String exitID = &quot;Collection&gt;&gt;select&quot;;</span>
<span class="nc" id="L498">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L499">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L500">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L501">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L502">      return testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L503">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L506">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   Collection indexError()
  {
<span class="nc" id="L514">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError&quot;;</span>
<span class="nc" id="L515">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L516">    this.error(String.from(&quot;Improper index for this collection&quot;));</span>
<span class="nc" id="L517">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexRangeError()
  {
<span class="nc" id="L525">    java.lang.String exitID = &quot;Collection&gt;&gt;indexRangeError&quot;;</span>
<span class="nc" id="L526">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L527">    this.error(String.from(&quot;Supplied index is out of bounds&quot;));</span>
<span class="nc" id="L528">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexError_limit(final Ordinal index, final Ordinal limit)
  {
<span class="nc" id="L536">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError_limit&quot;;</span>
<span class="nc" id="L537">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L538">    this.error(index.printString().append(String.from(&quot; exceeds &quot;)).append(limit.printString()));</span>
<span class="nc" id="L539">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementNotFound()
  {
<span class="nc" id="L547">    java.lang.String exitID = &quot;Collection&gt;&gt;elementNotFound&quot;;</span>
<span class="nc" id="L548">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L549">    this.error(String.from(&quot;Desired collection element not found&quot;));</span>
<span class="nc" id="L550">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementClassError()
  {
<span class="nc" id="L558">    java.lang.String exitID = &quot;Collection&gt;&gt;elementClassError&quot;;</span>
<span class="nc" id="L559">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L560">    this.error(String.from(&quot;Collection does not hold supplied kind of element&quot;));</span>
<span class="nc" id="L561">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection immutabilityError()
  {
<span class="fc" id="L569">    java.lang.String exitID = &quot;Collection&gt;&gt;immutabilityError&quot;;</span>
<span class="fc" id="L570">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L571">    this.error(String.from(&quot;Collection contents cannot be changed&quot;));</span>
<span class="nc" id="L572">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection compatibilityError()
  {
<span class="nc" id="L580">    java.lang.String exitID = &quot;Collection&gt;&gt;compatibilityError&quot;;</span>
<span class="nc" id="L581">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L582">    this.error(String.from(&quot;Collections are not comparable&quot;));</span>
<span class="nc" id="L583">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCollectionError()
  {
<span class="nc" id="L591">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCollectionError&quot;;</span>
<span class="nc" id="L592">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L593">    this.error(String.from(&quot;This collection is empty&quot;));</span>
<span class="nc" id="L594">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean isCollection()
  {
<span class="fc" id="L602">    java.lang.String exitID = &quot;Collection&gt;&gt;isCollection&quot;;</span>
<span class="fc" id="L603">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L604">    return (Boolean)True.literal();</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean equals(final Subject candidate)
  {
<span class="fc" id="L612">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="fc" id="L613">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L614">    return (Boolean)((Object)candidate).isCollection().and(Predicate.with(f2 -&gt; {</span>
<span class="fc" id="L615">      return (this.equals(((Collected)candidate)));</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Boolean equals(final Collected&lt;ElementType&gt; aCollection)
  {
<span class="nc" id="L624">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="nc" id="L625">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L626">    return (Boolean)False.literal();</span>
  }

  /**
   * @return 
   */
  public   Boolean allSatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L634">    java.lang.String exitID = &quot;Collection&gt;&gt;allSatisfy&quot;;</span>
<span class="nc" id="L635">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L636">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L637">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L638">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L639">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L640">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L643">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean anySatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L652">    java.lang.String exitID = &quot;Collection&gt;&gt;anySatisfy&quot;;</span>
<span class="nc" id="L653">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L654">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L655">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L656">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L657">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L658">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L661">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean contains(final MonadicPredicate testBlock)
  {
<span class="nc" id="L670">    java.lang.String exitID = &quot;Collection&gt;&gt;contains&quot;;</span>
<span class="nc" id="L671">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L672">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L673">    this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L674">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="nc" id="L676">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean includes(final Subject anObject)
  {
<span class="nc" id="L685">    java.lang.String exitID = &quot;Collection&gt;&gt;includes&quot;;</span>
<span class="nc" id="L686">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L687">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L688">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L689">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L690">      return (Boolean)f0.exit(exitID, (element.equals(anObject)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L691">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L694">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean _isEmpty()
  {
<span class="fc" id="L703">    java.lang.String exitID = &quot;Collection&gt;&gt;_isEmpty&quot;;</span>
<span class="fc" id="L704">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L705">    return (Boolean)(SmallInteger.from(0).equals(this.size()));</span>
  }

  /**
   * @return 
   */
  public   Boolean notEmpty()
  {
<span class="fc" id="L713">    java.lang.String exitID = &quot;Collection&gt;&gt;notEmpty&quot;;</span>
<span class="fc" id="L714">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L715">    return (Boolean)(SmallInteger.from(0).lessThan(this.size()));</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCheck()
  {
<span class="fc" id="L723">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCheck&quot;;</span>
<span class="fc" id="L724">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L725">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L726">    this._isEmpty().ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L727">      return (Collection)f0.exit(exitID, this.emptyCollectionError());</span>
    }, &quot;&quot;));
<span class="fc" id="L729">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   int checkRange(final Ordinal index)
  {
<span class="nc" id="L738">    java.lang.String exitID = &quot;Collection&gt;&gt;checkRange&quot;;</span>
<span class="nc" id="L739">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L740">    return (int)this.checkIndex(index);</span>
  }

  /**
   * @return 
   */
  public   int checkGrows(final Ordinal index)
  {
<span class="fc" id="L748">    java.lang.String exitID = &quot;Collection&gt;&gt;checkGrows&quot;;</span>
<span class="fc" id="L749">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L750">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L751" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L752">      this.indexError_limit(index, Unity);</span>
<span class="nc" id="L753">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L755">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   int checkIndex(final Ordinal index)
  {
<span class="fc" id="L763">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex&quot;;</span>
<span class="fc" id="L764">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L765">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L766" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L767">      this.indexError_limit(index, Unity);</span>
<span class="nc" id="L768">      return Negativity.primitiveInteger();</span>
    };
<span class="pc bpc" id="L770" title="1 of 2 branches missed.">    if (!((i &lt; this.primitiveSize()))) {</span>
<span class="nc" id="L771">      this.indexError_limit(index, this.size());</span>
<span class="nc" id="L772">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L774">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   int checkIndex_ifAbsent(final Ordinal index, final NiladicValuable aBlock)
  {
<span class="fc" id="L782">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex_ifAbsent&quot;;</span>
<span class="fc" id="L783">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L784">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L785" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L786">      aBlock.value();</span>
<span class="nc" id="L787">      return Negativity.primitiveInteger();</span>
    };
<span class="pc bpc" id="L789" title="1 of 2 branches missed.">    if (!((i &lt; this.primitiveSize()))) {</span>
<span class="nc" id="L790">      aBlock.value();</span>
<span class="nc" id="L791">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L793">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   Collection registerType(final Object element)
  {
<span class="fc" id="L801">    java.lang.String exitID = &quot;Collection&gt;&gt;registerType&quot;;</span>
<span class="fc" id="L802">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L803">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L804">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L805">      return (Collection)f0.exit(exitID, this);</span>
    }, &quot;&quot;));

<span class="fc" id="L808">     elementType = element.species();</span>
<span class="fc" id="L809">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean collectsElements(final Object element)
  {
<span class="fc" id="L818">    java.lang.String exitID = &quot;Collection&gt;&gt;collectsElements&quot;;</span>
<span class="fc" id="L819">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L820">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L821">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L822">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="fc" id="L824">    return (Boolean)f0.exit(exitID, Boolean.from(element.species().inheritsFrom(this.elementType())));</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findFirst(final MonadicPredicate testBlock)
  {
<span class="nc" id="L833">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst&quot;;</span>
<span class="nc" id="L834">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L835">    return (Integer)this.findFirst_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L836">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findLast(final MonadicPredicate testBlock)
  {
<span class="nc" id="L845">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast&quot;;</span>
<span class="nc" id="L846">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L847">    return (Integer)this.findLast_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L848">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findFirst_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L857">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst_ifAbsent&quot;;</span>
<span class="nc" id="L858">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L859">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L860">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L861">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L862">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L863">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L864">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L866">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L867">    }, &quot;element&quot;));</span>
<span class="nc" id="L868">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findLast_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L877">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast_ifAbsent&quot;;</span>
<span class="nc" id="L878">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L879">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L880">    FastInteger index = this.size().asSmallInteger().asFastInteger();</span>
<span class="nc" id="L881">    this.reverseDo(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L882">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L883">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L884">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L886">    index.subtract(SmallInteger.from(1));</span>
<span class="nc" id="L887">    }, &quot;element&quot;));</span>
<span class="nc" id="L888">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   OrderedCollection&lt;String&gt; printElements()
  {
<span class="nc" id="L897">    java.lang.String exitID = &quot;Collection&gt;&gt;printElements&quot;;</span>
<span class="nc" id="L898">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L899">    return (OrderedCollection&lt;String&gt;)this.collect(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L900">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L901">      return element.printLine();</span>
    }, &quot;element&quot;));
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>