<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Collection.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">libs-hoot</a> &gt; <a href="index.source.html" class="el_package">Hoot.Collections</a> &gt; <span class="el_source">Collection.java</span></div><h1>Collection.java</h1><pre class="source lang-java linenums">/**
* Copyright 2010,2021 Nikolas S Boyd.
Permission is granted to copy this work provided this copyright statement is retained in all copies.

*/
package Hoot.Collections;

import Hoot.Runtime.Functions.*;
import Hoot.Runtime.Faces.*;
import Hoot.Runtime.Values.*;
import Hoot.Runtime.Blocks.*;
import Smalltalk.Core.*;
import Smalltalk.Blocks.*;
import Hoot.Behaviors.*;
import Hoot.Behaviors.Nil;
import Hoot.Behaviors.Object;
import Hoot.Behaviors.True;
import Hoot.Behaviors.False;
import Hoot.Behaviors.Boolean;
import Hoot.Magnitudes.*;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.Character;
import Hoot.Magnitudes.Float;
import Hoot.Magnitudes.Double;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.FastInteger;
import static Hoot.Magnitudes.SmallInteger.*;
import Smalltalk.Magnitudes.Ordinal;
import Smalltalk.Collections.*;
import Smalltalk.Core.Subject;
import Smalltalk.Core.Classified;
import java.util.List;

<span class="fc" id="L34">public abstract class Collection&lt;ElementType extends Object&gt; extends Object implements CollectedVariably&lt;ElementType&gt;</span>
{
<span class="nc" id="L36">  public static Metaclass type() { return (Metaclass)Metaclass.$class; }</span>
<span class="nc" id="L37">  @Override public Metaclass $class() { return (Metaclass)Metaclass.$class; }</span>
  public static class Metaclass extends Object.Metaclass implements CollectedVariably.Metatype
  {
<span class="fc" id="L40">    static final Collection.Metaclass $class = new Collection.Metaclass();</span>
    public Metaclass() {
<span class="fc" id="L42">      this(Collection.Metaclass.class);</span>
<span class="fc" id="L43">    }</span>

    public Metaclass(java.lang.Class aClass) {
<span class="fc" id="L46">      super(aClass);</span>
<span class="fc" id="L47">    }</span>

<span class="fc" id="L49">    @Override public java.lang.Class outerClass() { return Collection.class; }</span>

    /**
     * @return 
     */
    @Override public   Collection $new()
    {
<span class="nc" id="L56">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L57">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L58">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L59">      return (Collection)f0.exit(exitID, this.$new(SmallInteger.from(10)));</span>
      });
    }

    /**
     * @return 
     */
    @Override public   Collection $new(final Ordinal capacity)
    {
<span class="nc" id="L68">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L69">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L70">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L71">      return (Collection)f0.exit(exitID, new OrderedCollection(capacity));</span>
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with(final ElementType a)
    {
<span class="nc" id="L80">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with&quot;;</span>
<span class="nc" id="L81">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L82">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L83">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L84">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L85">      prime.add(((Object)a)); </span>

<span class="nc" id="L87">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with(final ElementType a, final ElementType b)
    {
<span class="nc" id="L97">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with&quot;;</span>
<span class="nc" id="L98">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L99">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L100">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L101">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L102">      prime.add(((Object)a)); </span>
<span class="nc" id="L103">      prime.add(((Object)b)); </span>

<span class="nc" id="L105">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with(final ElementType a, final ElementType b, final ElementType c)
    {
<span class="nc" id="L115">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with&quot;;</span>
<span class="nc" id="L116">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L117">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L118">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L119">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L120">      prime.add(((Object)a)); </span>
<span class="nc" id="L121">      prime.add(((Object)b)); </span>
<span class="nc" id="L122">      prime.add(((Object)c)); </span>

<span class="nc" id="L124">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with_with(final ElementType a, final ElementType b, final ElementType c, final ElementType d)
    {
<span class="nc" id="L134">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with_with&quot;;</span>
<span class="nc" id="L135">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L136">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L137">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L138">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L139">      prime.add(((Object)a)); </span>
<span class="nc" id="L140">      prime.add(((Object)b)); </span>
<span class="nc" id="L141">      prime.add(((Object)c)); </span>
<span class="nc" id="L142">      prime.add(((Object)d)); </span>

<span class="nc" id="L144">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; withAll(final CollectedReadably&lt;ElementType&gt; elements)
    {
<span class="nc" id="L154">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;withAll&quot;;</span>
<span class="nc" id="L155">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L156">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L157">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L158">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L159">      prime.addAll(elements); </span>

<span class="nc" id="L161">      return prime.yourself();</span>
      });
      });
    }
  }


<span class="fc" id="L168">    protected Classified elementType = Object.type();</span>
<span class="fc" id="L169">    public Classified elementType() { return this.elementType; }</span>
<span class="nc" id="L170">    public Object getElementType() { return (Object)this.elementType; }</span>

<span class="nc" id="L172">    public Collection elementType(Classified value) { this.elementType = value; return this; }</span>
<span class="nc" id="L173">    public void setElementType(Object value) { this.elementType = (Classified)value; }</span>

  ;
  /**
   * @return 
   */
  public   Collection rehash()
  {
<span class="nc" id="L181">    java.lang.String exitID = &quot;Collection&gt;&gt;rehash&quot;;</span>
<span class="nc" id="L182">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L183">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Integer capacity()
  {
<span class="nc" id="L191">    java.lang.String exitID = &quot;Collection&gt;&gt;capacity&quot;;</span>
<span class="nc" id="L192">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L193">    return (Integer)this.size();</span>
  }

  /**
   * @return 
   */
  public   int primitiveSize()
  {
<span class="fc" id="L201">    java.lang.String exitID = &quot;Collection&gt;&gt;primitiveSize&quot;;</span>
<span class="fc" id="L202">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L203">    return (int)this.size().primitiveInteger();</span>
  }

  /**
   * @return 
   */
  public   Integer size()
  {
<span class="nc" id="L211">    java.lang.String exitID = &quot;Collection&gt;&gt;size&quot;;</span>
<span class="nc" id="L212">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L213">    FastInteger tally = Zero.asFastInteger();</span>
<span class="nc" id="L214">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L215">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L216">      tally.add(Unity);</span>
<span class="nc" id="L217">    }, &quot;element&quot;));</span>
<span class="nc" id="L218">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  public   Integer occurrencesOf(final Subject candidate)
  {
<span class="nc" id="L226">    java.lang.String exitID = &quot;Collection&gt;&gt;occurrencesOf&quot;;</span>
<span class="nc" id="L227">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L228">    FastInteger tally = Zero.asFastInteger();</span>
<span class="nc" id="L229">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L230">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L231">      return (candidate.equals(element)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L232">      tally.add(Unity);</span>
<span class="nc" id="L233">    }, &quot;&quot;));</span>
    }, &quot;element&quot;));
<span class="nc" id="L235">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  @Override public   java.lang.String toString()
  {
<span class="fc" id="L243">    java.lang.String exitID = &quot;Collection&gt;&gt;toString&quot;;</span>
<span class="fc" id="L244">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L245">    return (java.lang.String)this.printString().primitiveString();</span>
  }

  /**
   * @return 
   */
  @Override public   String printString()
  {
<span class="fc" id="L253">    java.lang.String exitID = &quot;Collection&gt;&gt;printString&quot;;</span>
<span class="fc" id="L254">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L255">    return (String)String.from(this.asList().toString());</span>
  }

  /**
   * @return 
   */
  public   List&lt;ElementType&gt; asList()
  {
<span class="nc" id="L263">    java.lang.String exitID = &quot;Collection&gt;&gt;asList&quot;;</span>
<span class="nc" id="L264">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L265">    return (List&lt;ElementType&gt;)this.asOrderedCollection().asList();</span>
  }

  /**
   * @return 
   */
  public   CollectedArray&lt;ElementType&gt; asArray()
  {
<span class="nc" id="L273">    java.lang.String exitID = &quot;Collection&gt;&gt;asArray&quot;;</span>
<span class="nc" id="L274">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L275">    Array result = Array.type().$new(this.size());</span>

<span class="nc" id="L277">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L278">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L279">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L280">      result.at_put(index, element);</span>
<span class="nc" id="L281">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L282">    }, &quot;element&quot;));</span>
<span class="nc" id="L283">    return (CollectedArray&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedBaggage&lt;ElementType&gt; asBag()
  {
<span class="fc" id="L291">    java.lang.String exitID = &quot;Collection&gt;&gt;asBag&quot;;</span>
<span class="fc" id="L292">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L294">    Bag prime = (Bag)Bag.type().$new(this.size());</span>
<span class="fc" id="L295">    prime.addAll(this); </span>

<span class="fc" id="L297">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedOrdinally&lt;ElementType&gt; asOrderedCollection()
  {
<span class="fc" id="L306">    java.lang.String exitID = &quot;Collection&gt;&gt;asOrderedCollection&quot;;</span>
<span class="fc" id="L307">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L308">    OrderedCollection result = OrderedCollection.type().$new(this.size());</span>
<span class="fc" id="L309">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L310">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L311">      return result.addLast(element);</span>
    }, &quot;element&quot;));
<span class="fc" id="L313">    return (CollectedOrdinally&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedDistinctly&lt;ElementType&gt; asSet()
  {
<span class="nc" id="L321">    java.lang.String exitID = &quot;Collection&gt;&gt;asSet&quot;;</span>
<span class="nc" id="L322">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L324">    Set prime = (Set)Set.type().$new(this.size());</span>
<span class="nc" id="L325">    prime.addAll(this); </span>

<span class="nc" id="L327">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; sorted()
  {
<span class="fc" id="L336">    java.lang.String exitID = &quot;Collection&gt;&gt;sorted&quot;;</span>
<span class="fc" id="L337">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L338">    return (CollectedSortably&lt;ElementType&gt;)this.asSortedCollection();</span>
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection()
  {
<span class="fc" id="L346">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="fc" id="L347">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L349">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="fc" id="L350">    prime.addAll(this); </span>

<span class="fc" id="L352">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection(final DyadicPredicate sortBlock)
  {
<span class="nc" id="L361">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="nc" id="L362">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L364">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="nc" id="L365">    prime.sortBlock(sortBlock); </span>
<span class="nc" id="L366">    prime.addAll(this); </span>

<span class="nc" id="L368">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  @Override public   Collection $do(final MonadicValuable aBlock)
  {
<span class="nc" id="L377">    java.lang.String exitID = &quot;Collection&gt;&gt;$do&quot;;</span>
<span class="nc" id="L378">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L379">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection reverseDo(final MonadicValuable aBlock)
  {
<span class="nc" id="L387">    java.lang.String exitID = &quot;Collection&gt;&gt;reverseDo&quot;;</span>
<span class="nc" id="L388">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L389">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType collect(final MonadicValuable transformBlock)
  {
<span class="nc" id="L397">    java.lang.String exitID = &quot;Collection&gt;&gt;collect&quot;;</span>
<span class="nc" id="L398">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L399">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L400">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L401">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L402">      return result.add(transformBlock.value(element));</span>
    }, &quot;element&quot;));
<span class="nc" id="L404">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   ElementType detect(final MonadicPredicate testBlock)
  {
<span class="nc" id="L412">    java.lang.String exitID = &quot;Collection&gt;&gt;detect&quot;;</span>
<span class="nc" id="L413">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L414">    return (ElementType)this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L415">      this.elementNotFound();</span>
<span class="nc" id="L416">    return Nil.literal();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   ElementType detect_ifNone(final MonadicPredicate testBlock, final NiladicValuable missingBlock)
  {
<span class="nc" id="L425">    java.lang.String exitID = &quot;Collection&gt;&gt;detect_ifNone&quot;;</span>
<span class="nc" id="L426">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L427">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L428">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L429">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L430">      return (ElementType)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L431">      return (ElementType)f0.exit(exitID, element);</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L434">    return (ElementType)f0.exit(exitID, missingBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Collection do_separatedBy(final MonadicValuable aBlock, final NiladicValuable betweenBlock)
  {
<span class="nc" id="L443">    java.lang.String exitID = &quot;Collection&gt;&gt;do_separatedBy&quot;;</span>
<span class="nc" id="L444">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L445">    Boolean betweenElements = False.literal() ; f0.bind(&quot;betweenElements&quot;, betweenElements);</span>
<span class="nc" id="L446">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L447">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L448">      f0.getValue(&quot;betweenElements&quot;, Boolean.class).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L449">      betweenBlock.value();</span>
<span class="nc" id="L450">    }, &quot;&quot;));</span>
<span class="nc" id="L451">    aBlock.value(element);</span>
<span class="nc" id="L452">    ; f0.bind(&quot;betweenElements&quot;, f0.getValue(&quot;betweenElements&quot;, Boolean.class).not());</span>
<span class="nc" id="L453">    }, &quot;element&quot;));</span>
<span class="nc" id="L454">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;ResultType extends Subject&gt; ResultType inject_into(final ResultType value, final DyadicValuable binaryBlock)
  {
<span class="nc" id="L462">    java.lang.String exitID = &quot;Collection&gt;&gt;inject_into&quot;;</span>
<span class="nc" id="L463">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L464">    Subject result = value ; f0.bind(&quot;result&quot;, result);</span>
<span class="nc" id="L465">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L466">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L467">      ; f0.bind(&quot;result&quot;, binaryBlock.value_value(f0.getValue(&quot;result&quot;, Subject.class), element));</span>
<span class="nc" id="L468">    }, &quot;element&quot;));</span>
<span class="nc" id="L469">    return (ResultType)((ResultType)f0.getValue(&quot;result&quot;, Subject.class));</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType reject(final MonadicPredicate testBlock)
  {
<span class="nc" id="L477">    java.lang.String exitID = &quot;Collection&gt;&gt;reject&quot;;</span>
<span class="nc" id="L478">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L479">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L480">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L481">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L482">      return testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L483">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L486">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType select(final MonadicPredicate testBlock)
  {
<span class="nc" id="L494">    java.lang.String exitID = &quot;Collection&gt;&gt;select&quot;;</span>
<span class="nc" id="L495">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L496">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L497">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L498">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L499">      return testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L500">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L503">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   Collection indexError()
  {
<span class="nc" id="L511">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError&quot;;</span>
<span class="nc" id="L512">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L513">    this.error(String.from(&quot;Improper index for this collection&quot;));</span>
<span class="nc" id="L514">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexRangeError()
  {
<span class="nc" id="L522">    java.lang.String exitID = &quot;Collection&gt;&gt;indexRangeError&quot;;</span>
<span class="nc" id="L523">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L524">    this.error(String.from(&quot;Supplied index is out of bounds&quot;));</span>
<span class="nc" id="L525">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexError_limit(final Ordinal index, final Ordinal limit)
  {
<span class="nc" id="L533">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError_limit&quot;;</span>
<span class="nc" id="L534">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L535">    this.error(index.printString().append(String.from(&quot; exceeds &quot;)).append(limit.printString()));</span>
<span class="nc" id="L536">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementNotFound()
  {
<span class="nc" id="L544">    java.lang.String exitID = &quot;Collection&gt;&gt;elementNotFound&quot;;</span>
<span class="nc" id="L545">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L546">    this.error(String.from(&quot;Desired collection element not found&quot;));</span>
<span class="nc" id="L547">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementClassError()
  {
<span class="nc" id="L555">    java.lang.String exitID = &quot;Collection&gt;&gt;elementClassError&quot;;</span>
<span class="nc" id="L556">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L557">    this.error(String.from(&quot;Collection does not hold supplied kind of element&quot;));</span>
<span class="nc" id="L558">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection immutabilityError()
  {
<span class="nc" id="L566">    java.lang.String exitID = &quot;Collection&gt;&gt;immutabilityError&quot;;</span>
<span class="nc" id="L567">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L568">    this.error(String.from(&quot;Collection contents cannot be changed&quot;));</span>
<span class="nc" id="L569">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection compatibilityError()
  {
<span class="nc" id="L577">    java.lang.String exitID = &quot;Collection&gt;&gt;compatibilityError&quot;;</span>
<span class="nc" id="L578">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L579">    this.error(String.from(&quot;Collections are not comparable&quot;));</span>
<span class="nc" id="L580">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCollectionError()
  {
<span class="nc" id="L588">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCollectionError&quot;;</span>
<span class="nc" id="L589">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L590">    this.error(String.from(&quot;This collection is empty&quot;));</span>
<span class="nc" id="L591">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean isCollection()
  {
<span class="fc" id="L599">    java.lang.String exitID = &quot;Collection&gt;&gt;isCollection&quot;;</span>
<span class="fc" id="L600">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L601">    return (Boolean)True.literal();</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean equals(final Subject candidate)
  {
<span class="fc" id="L609">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="fc" id="L610">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L611">    return (Boolean)((Object)candidate).isCollection().and(Predicate.with(f2 -&gt; {</span>
<span class="fc" id="L612">      return (this.equals(((Collected)candidate)));</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Boolean equals(final Collected&lt;ElementType&gt; aCollection)
  {
<span class="nc" id="L621">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="nc" id="L622">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L623">    return (Boolean)False.literal();</span>
  }

  /**
   * @return 
   */
  public   Boolean allSatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L631">    java.lang.String exitID = &quot;Collection&gt;&gt;allSatisfy&quot;;</span>
<span class="nc" id="L632">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L633">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L634">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L635">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L636">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L637">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L640">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean anySatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L649">    java.lang.String exitID = &quot;Collection&gt;&gt;anySatisfy&quot;;</span>
<span class="nc" id="L650">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L651">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L652">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L653">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L654">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L655">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L658">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean contains(final MonadicPredicate testBlock)
  {
<span class="nc" id="L667">    java.lang.String exitID = &quot;Collection&gt;&gt;contains&quot;;</span>
<span class="nc" id="L668">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L669">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L670">    this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L671">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="nc" id="L673">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean includes(final Subject anObject)
  {
<span class="nc" id="L682">    java.lang.String exitID = &quot;Collection&gt;&gt;includes&quot;;</span>
<span class="nc" id="L683">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L684">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L685">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L686">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L687">      return (Boolean)f0.exit(exitID, (element.equals(anObject)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L688">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L691">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   boolean isEmpty()
  {
<span class="fc" id="L700">    java.lang.String exitID = &quot;Collection&gt;&gt;isEmpty&quot;;</span>
<span class="fc" id="L701">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L702">    return (boolean)(SmallInteger.from(0).equals(this.size())).primitiveBoolean();</span>
  }

  /**
   * @return 
   */
  public   Boolean notEmpty()
  {
<span class="fc" id="L710">    java.lang.String exitID = &quot;Collection&gt;&gt;notEmpty&quot;;</span>
<span class="fc" id="L711">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L712">    return (Boolean)Boolean.from(this.isEmpty()).not();</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCheck()
  {
<span class="fc" id="L720">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCheck&quot;;</span>
<span class="fc" id="L721">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L722">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L723">    this.notEmpty().ifFalse(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L724">      return (Collection)f0.exit(exitID, this.emptyCollectionError());</span>
    }, &quot;&quot;));
<span class="fc" id="L726">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   int checkRange(final Ordinal index)
  {
<span class="nc" id="L735">    java.lang.String exitID = &quot;Collection&gt;&gt;checkRange&quot;;</span>
<span class="nc" id="L736">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L737">    return (int)this.checkIndex(index);</span>
  }

  /**
   * @return 
   */
  public   int checkGrows(final Ordinal index)
  {
<span class="fc" id="L745">    java.lang.String exitID = &quot;Collection&gt;&gt;checkGrows&quot;;</span>
<span class="fc" id="L746">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L747">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L748" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L749">      this.indexError_limit(index, Unity);</span>
<span class="nc" id="L750">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L752">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   int checkIndex(final Ordinal index)
  {
<span class="fc" id="L760">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex&quot;;</span>
<span class="fc" id="L761">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L762">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L763" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L764">      this.indexError_limit(index, Unity);</span>
<span class="nc" id="L765">      return Negativity.primitiveInteger();</span>
    };
<span class="pc bpc" id="L767" title="1 of 2 branches missed.">    if (!((i &lt; this.primitiveSize()))) {</span>
<span class="nc" id="L768">      this.indexError_limit(index, this.size());</span>
<span class="nc" id="L769">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L771">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   int checkIndex_ifAbsent(final Ordinal index, final NiladicValuable aBlock)
  {
<span class="fc" id="L779">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex_ifAbsent&quot;;</span>
<span class="fc" id="L780">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L781">    int i = (((Integer)index).primitiveInteger() - 1);</span>
<span class="pc bpc" id="L782" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L783">      aBlock.value();</span>
<span class="nc" id="L784">      return Negativity.primitiveInteger();</span>
    };
<span class="pc bpc" id="L786" title="1 of 2 branches missed.">    if (!((i &lt; this.primitiveSize()))) {</span>
<span class="nc" id="L787">      aBlock.value();</span>
<span class="nc" id="L788">      return Negativity.primitiveInteger();</span>
    };
<span class="fc" id="L790">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   Collection registerType(final Object element)
  {
<span class="fc" id="L798">    java.lang.String exitID = &quot;Collection&gt;&gt;registerType&quot;;</span>
<span class="fc" id="L799">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L800">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L801">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L802">      return (Collection)f0.exit(exitID, this);</span>
    }, &quot;&quot;));

<span class="fc" id="L805">     elementType = element.species();</span>
<span class="fc" id="L806">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean collectsElements(final Object element)
  {
<span class="fc" id="L815">    java.lang.String exitID = &quot;Collection&gt;&gt;collectsElements&quot;;</span>
<span class="fc" id="L816">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L817">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L818">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L819">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="fc" id="L821">    return (Boolean)f0.exit(exitID, Boolean.from(element.species().inheritsFrom(this.elementType())));</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findFirst(final MonadicPredicate testBlock)
  {
<span class="nc" id="L830">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst&quot;;</span>
<span class="nc" id="L831">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L832">    return (Integer)this.findFirst_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L833">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findLast(final MonadicPredicate testBlock)
  {
<span class="nc" id="L842">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast&quot;;</span>
<span class="nc" id="L843">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L844">    return (Integer)this.findLast_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L845">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findFirst_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L854">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst_ifAbsent&quot;;</span>
<span class="nc" id="L855">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L856">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L857">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L858">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L859">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L860">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L861">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L863">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L864">    }, &quot;element&quot;));</span>
<span class="nc" id="L865">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findLast_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L874">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast_ifAbsent&quot;;</span>
<span class="nc" id="L875">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L876">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L877">    FastInteger index = this.size().asSmallInteger().asFastInteger();</span>
<span class="nc" id="L878">    this.reverseDo(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L879">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L880">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L881">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L883">    index.subtract(SmallInteger.from(1));</span>
<span class="nc" id="L884">    }, &quot;element&quot;));</span>
<span class="nc" id="L885">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>