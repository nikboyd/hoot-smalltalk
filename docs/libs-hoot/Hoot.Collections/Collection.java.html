<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Collection.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">libs-hoot</a> &gt; <a href="index.source.html" class="el_package">Hoot.Collections</a> &gt; <span class="el_source">Collection.java</span></div><h1>Collection.java</h1><pre class="source lang-java linenums">/**
* Copyright 2010,2021 Nikolas S Boyd.
Permission is granted to copy this work provided this copyright statement is retained in all copies.

*/
package Hoot.Collections;

import Hoot.Runtime.Functions.*;
import Hoot.Runtime.Faces.*;
import Hoot.Runtime.Values.*;
import Hoot.Runtime.Blocks.*;
import Smalltalk.Core.*;
import Smalltalk.Blocks.*;
import Hoot.Behaviors.*;
import Hoot.Behaviors.Nil;
import Hoot.Behaviors.Object;
import Hoot.Behaviors.True;
import Hoot.Behaviors.False;
import Hoot.Behaviors.Boolean;
import Hoot.Magnitudes.*;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.Character;
import Hoot.Magnitudes.Float;
import Hoot.Magnitudes.Double;
import static Hoot.Magnitudes.SmallInteger.*;
import Hoot.Magnitudes.Integer;
import Hoot.Magnitudes.FastInteger;
import Smalltalk.Magnitudes.Ordinal;
import Smalltalk.Collections.*;
import Smalltalk.Core.Subject;
import Smalltalk.Core.Classified;
import java.util.List;

<span class="fc" id="L34">public abstract class Collection&lt;ElementType extends Object&gt; extends Object implements CollectedVariably&lt;ElementType&gt;</span>
{
<span class="nc" id="L36">  public static Metaclass type() { return (Metaclass)Metaclass.$class; }</span>
<span class="nc" id="L37">  @Override public Metaclass $class() { return (Metaclass)Metaclass.$class; }</span>
  public static class Metaclass extends Object.Metaclass implements CollectedVariably.Metatype
  {
<span class="fc" id="L40">    static final Collection.Metaclass $class = new Collection.Metaclass();</span>
    public Metaclass() {
<span class="fc" id="L42">      this(Collection.Metaclass.class);</span>
<span class="fc" id="L43">    }</span>

    public Metaclass(java.lang.Class aClass) {
<span class="fc" id="L46">      super(aClass);</span>
<span class="fc" id="L47">    }</span>

<span class="fc" id="L49">    @Override public java.lang.Class outerClass() { return Collection.class; }</span>

    /**
     * @return 
     */
    @Override public   Collection $new()
    {
<span class="nc" id="L56">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L57">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L58">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L59">      return (Collection)f0.exit(exitID, this.$new(SmallInteger.from(10)));</span>
      });
    }

    /**
     * @return 
     */
    @Override public   Collection $new(final Ordinal capacity)
    {
<span class="nc" id="L68">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;$new&quot;;</span>
<span class="nc" id="L69">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L70">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L71">      return (Collection)f0.exit(exitID, new OrderedCollection(capacity));</span>
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with(final ElementType a)
    {
<span class="nc" id="L80">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with&quot;;</span>
<span class="nc" id="L81">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L82">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L83">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L84">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L85">      prime.add(((Object)a)); </span>

<span class="nc" id="L87">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with(final ElementType a, final ElementType b)
    {
<span class="nc" id="L97">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with&quot;;</span>
<span class="nc" id="L98">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L99">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L100">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L101">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L102">      prime.add(((Object)a)); </span>
<span class="nc" id="L103">      prime.add(((Object)b)); </span>

<span class="nc" id="L105">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with(final ElementType a, final ElementType b, final ElementType c)
    {
<span class="nc" id="L115">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with&quot;;</span>
<span class="nc" id="L116">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L117">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L118">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L119">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L120">      prime.add(((Object)a)); </span>
<span class="nc" id="L121">      prime.add(((Object)b)); </span>
<span class="nc" id="L122">      prime.add(((Object)c)); </span>

<span class="nc" id="L124">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; with_with_with_with(final ElementType a, final ElementType b, final ElementType c, final ElementType d)
    {
<span class="nc" id="L134">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;with_with_with_with&quot;;</span>
<span class="nc" id="L135">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L136">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L137">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L138">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L139">      prime.add(((Object)a)); </span>
<span class="nc" id="L140">      prime.add(((Object)b)); </span>
<span class="nc" id="L141">      prime.add(((Object)c)); </span>
<span class="nc" id="L142">      prime.add(((Object)d)); </span>

<span class="nc" id="L144">      return prime.yourself();</span>
      });
      });
    }

    /**
     * @return 
     */
    public  &lt;ElementType extends Subject&gt; CollectedVariably&lt;ElementType&gt; withAll(final CollectedReadably&lt;ElementType&gt; elements)
    {
<span class="nc" id="L154">      java.lang.String exitID = &quot;CollectionMetatype&gt;&gt;withAll&quot;;</span>
<span class="nc" id="L155">      Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L156">      return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L157">      return (CollectedVariably&lt;ElementType&gt;)f0.exit(exitID, (fp) -&gt; {</span>
<span class="nc" id="L158">      Collection prime = (Collection)this.$new();</span>
<span class="nc" id="L159">      prime.addAll(elements); </span>

<span class="nc" id="L161">      return prime.yourself();</span>
      });
      });
    }
  }


<span class="fc" id="L168">    protected Classified elementType = Object.type();</span>
<span class="nc" id="L169">    public Classified elementType() { return this.elementType; }</span>
<span class="nc" id="L170">    public Object getElementType() { return (Object)this.elementType; }</span>

<span class="nc" id="L172">    public Collection elementType(Classified value) { this.elementType = value; return this; }</span>
<span class="nc" id="L173">    public void setElementType(Object value) { this.elementType = (Classified)value; }</span>

  ;
  /**
   * @return 
   */
  public   Collection rehash()
  {
<span class="nc" id="L181">    java.lang.String exitID = &quot;Collection&gt;&gt;rehash&quot;;</span>
<span class="nc" id="L182">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L183">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Integer capacity()
  {
<span class="nc" id="L191">    java.lang.String exitID = &quot;Collection&gt;&gt;capacity&quot;;</span>
<span class="nc" id="L192">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L193">    return (Integer)this.size();</span>
  }

  /**
   * @return 
   */
  public   Integer size()
  {
<span class="nc" id="L201">    java.lang.String exitID = &quot;Collection&gt;&gt;size&quot;;</span>
<span class="nc" id="L202">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L203">    FastInteger tally = SmallInteger.from(0).asFastInteger();</span>
<span class="nc" id="L204">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L205">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L206">      tally.add(SmallInteger.from(1));</span>
<span class="nc" id="L207">    }, &quot;element&quot;));</span>
<span class="nc" id="L208">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  public   Integer occurrencesOf(final Subject candidate)
  {
<span class="nc" id="L216">    java.lang.String exitID = &quot;Collection&gt;&gt;occurrencesOf&quot;;</span>
<span class="nc" id="L217">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L218">    FastInteger tally = SmallInteger.from(0).asFastInteger();</span>
<span class="nc" id="L219">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L220">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L221">      return (candidate.equals(element)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L222">      tally.add(SmallInteger.from(1));</span>
<span class="nc" id="L223">    }, &quot;&quot;));</span>
    }, &quot;element&quot;));
<span class="nc" id="L225">    return (Integer)tally;</span>
  }

  /**
   * @return 
   */
  @Override public   java.lang.String toString()
  {
<span class="fc" id="L233">    java.lang.String exitID = &quot;Collection&gt;&gt;toString&quot;;</span>
<span class="fc" id="L234">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L235">    return (java.lang.String)this.printString().primitiveString();</span>
  }

  /**
   * @return 
   */
  @Override public   String printString()
  {
<span class="fc" id="L243">    java.lang.String exitID = &quot;Collection&gt;&gt;printString&quot;;</span>
<span class="fc" id="L244">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L245">    return (String)String.from(this.asList().toString());</span>
  }

  /**
   * @return 
   */
  public   List&lt;ElementType&gt; asList()
  {
<span class="nc" id="L253">    java.lang.String exitID = &quot;Collection&gt;&gt;asList&quot;;</span>
<span class="nc" id="L254">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L255">    return (List&lt;ElementType&gt;)this.asOrderedCollection().asList();</span>
  }

  /**
   * @return 
   */
  public   CollectedArray&lt;ElementType&gt; asArray()
  {
<span class="nc" id="L263">    java.lang.String exitID = &quot;Collection&gt;&gt;asArray&quot;;</span>
<span class="nc" id="L264">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L265">    Array result = Array.type().$new(this.size());</span>

<span class="nc" id="L267">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L268">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L269">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L270">      result.at_put(index, element);</span>
<span class="nc" id="L271">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L272">    }, &quot;element&quot;));</span>
<span class="nc" id="L273">    return (CollectedArray&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedBaggage&lt;ElementType&gt; asBag()
  {
<span class="fc" id="L281">    java.lang.String exitID = &quot;Collection&gt;&gt;asBag&quot;;</span>
<span class="fc" id="L282">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L284">    Bag prime = (Bag)Bag.type().$new(this.size());</span>
<span class="fc" id="L285">    prime.addAll(this); </span>

<span class="fc" id="L287">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedOrdinally&lt;ElementType&gt; asOrderedCollection()
  {
<span class="fc" id="L296">    java.lang.String exitID = &quot;Collection&gt;&gt;asOrderedCollection&quot;;</span>
<span class="fc" id="L297">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L298">    OrderedCollection result = OrderedCollection.type().$new(this.size());</span>
<span class="fc" id="L299">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="fc" id="L300">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="fc" id="L301">      return result.addLast(element);</span>
    }, &quot;element&quot;));
<span class="fc" id="L303">    return (CollectedOrdinally&lt;ElementType&gt;)result;</span>
  }

  /**
   * @return 
   */
  public   CollectedDistinctly&lt;ElementType&gt; asSet()
  {
<span class="nc" id="L311">    java.lang.String exitID = &quot;Collection&gt;&gt;asSet&quot;;</span>
<span class="nc" id="L312">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L314">    Set prime = (Set)Set.type().$new(this.size());</span>
<span class="nc" id="L315">    prime.addAll(this); </span>

<span class="nc" id="L317">    return prime.yourself();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; sorted()
  {
<span class="fc" id="L326">    java.lang.String exitID = &quot;Collection&gt;&gt;sorted&quot;;</span>
<span class="fc" id="L327">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L328">    return (CollectedSortably&lt;ElementType&gt;)this.asSortedCollection();</span>
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection()
  {
<span class="fc" id="L336">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="fc" id="L337">    Frame f0 = new Frame(exitID);</span>
    {
<span class="fc" id="L339">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="fc" id="L340">    prime.addAll(this); </span>

<span class="fc" id="L342">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  public   CollectedSortably&lt;ElementType&gt; asSortedCollection(final DyadicPredicate sortBlock)
  {
<span class="nc" id="L351">    java.lang.String exitID = &quot;Collection&gt;&gt;asSortedCollection&quot;;</span>
<span class="nc" id="L352">    Frame f0 = new Frame(exitID);</span>
    {
<span class="nc" id="L354">    SortedCollection prime = (SortedCollection)SortedCollection.type().$new(this.size());</span>
<span class="nc" id="L355">    prime.sortBlock(sortBlock); </span>
<span class="nc" id="L356">    prime.addAll(this); </span>

<span class="nc" id="L358">    return prime.reSort();</span>
    }
  }

  /**
   * @return 
   */
  @Override public   Collection $do(final MonadicValuable aBlock)
  {
<span class="nc" id="L367">    java.lang.String exitID = &quot;Collection&gt;&gt;$do&quot;;</span>
<span class="nc" id="L368">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L369">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection reverseDo(final MonadicValuable aBlock)
  {
<span class="nc" id="L377">    java.lang.String exitID = &quot;Collection&gt;&gt;reverseDo&quot;;</span>
<span class="nc" id="L378">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L379">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType collect(final MonadicValuable transformBlock)
  {
<span class="nc" id="L387">    java.lang.String exitID = &quot;Collection&gt;&gt;collect&quot;;</span>
<span class="nc" id="L388">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L389">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L390">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L391">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L392">      return result.add(transformBlock.value(element));</span>
    }, &quot;element&quot;));
<span class="nc" id="L394">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   ElementType detect(final MonadicPredicate testBlock)
  {
<span class="nc" id="L402">    java.lang.String exitID = &quot;Collection&gt;&gt;detect&quot;;</span>
<span class="nc" id="L403">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L404">    return (ElementType)this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L405">      this.elementNotFound();</span>
<span class="nc" id="L406">    return Nil.literal();</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   ElementType detect_ifNone(final MonadicPredicate testBlock, final NiladicValuable missingBlock)
  {
<span class="nc" id="L415">    java.lang.String exitID = &quot;Collection&gt;&gt;detect_ifNone&quot;;</span>
<span class="nc" id="L416">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L417">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L418">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L419">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L420">      return (ElementType)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L421">      return (ElementType)f0.exit(exitID, element);</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L424">    return (ElementType)f0.exit(exitID, missingBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Collection do_separatedBy(final MonadicValuable aBlock, final NiladicValuable betweenBlock)
  {
<span class="nc" id="L433">    java.lang.String exitID = &quot;Collection&gt;&gt;do_separatedBy&quot;;</span>
<span class="nc" id="L434">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L435">    Boolean betweenElements = False.literal() ; f0.bind(&quot;betweenElements&quot;, betweenElements);</span>
<span class="nc" id="L436">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L437">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L438">      f0.getValue(&quot;betweenElements&quot;, Boolean.class).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L439">      betweenBlock.value();</span>
<span class="nc" id="L440">    }, &quot;&quot;));</span>
<span class="nc" id="L441">    aBlock.value(element);</span>
<span class="nc" id="L442">    ; f0.bind(&quot;betweenElements&quot;, f0.getValue(&quot;betweenElements&quot;, Boolean.class).not());</span>
<span class="nc" id="L443">    }, &quot;element&quot;));</span>
<span class="nc" id="L444">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public  &lt;ResultType extends Subject&gt; ResultType inject_into(final ResultType value, final DyadicValuable binaryBlock)
  {
<span class="nc" id="L452">    java.lang.String exitID = &quot;Collection&gt;&gt;inject_into&quot;;</span>
<span class="nc" id="L453">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L454">    Subject result = value ; f0.bind(&quot;result&quot;, result);</span>
<span class="nc" id="L455">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L456">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L457">      ; f0.bind(&quot;result&quot;, binaryBlock.value_value(f0.getValue(&quot;result&quot;, Subject.class), element));</span>
<span class="nc" id="L458">    }, &quot;element&quot;));</span>
<span class="nc" id="L459">    return (ResultType)((ResultType)f0.getValue(&quot;result&quot;, Subject.class));</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType reject(final MonadicPredicate testBlock)
  {
<span class="nc" id="L467">    java.lang.String exitID = &quot;Collection&gt;&gt;reject&quot;;</span>
<span class="nc" id="L468">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L469">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L470">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L471">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L472">      return testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L473">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L476">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public  &lt;CollectionType extends Collected&gt; CollectionType select(final MonadicPredicate testBlock)
  {
<span class="nc" id="L484">    java.lang.String exitID = &quot;Collection&gt;&gt;select&quot;;</span>
<span class="nc" id="L485">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L486">    CollectedVariably result = this.species().$new();</span>
<span class="nc" id="L487">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L488">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L489">      return testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L490">      return result.add(element);</span>
    }, &quot;&quot;));
    }, &quot;element&quot;));
<span class="nc" id="L493">    return (CollectionType)((CollectionType)result);</span>
  }

  /**
   * @return 
   */
  public   Collection indexError()
  {
<span class="nc" id="L501">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError&quot;;</span>
<span class="nc" id="L502">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L503">    this.error(String.from(&quot;Improper index for this collection&quot;));</span>
<span class="nc" id="L504">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexRangeError()
  {
<span class="nc" id="L512">    java.lang.String exitID = &quot;Collection&gt;&gt;indexRangeError&quot;;</span>
<span class="nc" id="L513">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L514">    this.error(String.from(&quot;Supplied index is out of bounds&quot;));</span>
<span class="nc" id="L515">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection indexError_limit(final Ordinal index, final Ordinal limit)
  {
<span class="nc" id="L523">    java.lang.String exitID = &quot;Collection&gt;&gt;indexError_limit&quot;;</span>
<span class="nc" id="L524">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L525">    this.error(index.printString().append(String.from(&quot; exceeds &quot;)).append(limit.printString()));</span>
<span class="nc" id="L526">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementNotFound()
  {
<span class="nc" id="L534">    java.lang.String exitID = &quot;Collection&gt;&gt;elementNotFound&quot;;</span>
<span class="nc" id="L535">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L536">    this.error(String.from(&quot;Desired collection element not found&quot;));</span>
<span class="nc" id="L537">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection elementClassError()
  {
<span class="nc" id="L545">    java.lang.String exitID = &quot;Collection&gt;&gt;elementClassError&quot;;</span>
<span class="nc" id="L546">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L547">    this.error(String.from(&quot;Collection does not hold supplied kind of element&quot;));</span>
<span class="nc" id="L548">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection immutabilityError()
  {
<span class="nc" id="L556">    java.lang.String exitID = &quot;Collection&gt;&gt;immutabilityError&quot;;</span>
<span class="nc" id="L557">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L558">    this.error(String.from(&quot;Collection contents cannot be changed&quot;));</span>
<span class="nc" id="L559">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection compatibilityError()
  {
<span class="nc" id="L567">    java.lang.String exitID = &quot;Collection&gt;&gt;compatibilityError&quot;;</span>
<span class="nc" id="L568">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L569">    this.error(String.from(&quot;Collections are not comparable&quot;));</span>
<span class="nc" id="L570">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCollectionError()
  {
<span class="nc" id="L578">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCollectionError&quot;;</span>
<span class="nc" id="L579">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L580">    this.error(String.from(&quot;This collection is empty&quot;));</span>
<span class="nc" id="L581">    return (Collection)this;</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean isCollection()
  {
<span class="fc" id="L589">    java.lang.String exitID = &quot;Collection&gt;&gt;isCollection&quot;;</span>
<span class="fc" id="L590">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L591">    return (Boolean)True.literal();</span>
  }

  /**
   * @return 
   */
  @Override public   Boolean equals(final Subject candidate)
  {
<span class="fc" id="L599">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="fc" id="L600">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L601">    return (Boolean)((Object)candidate).isCollection().and(Predicate.with(f2 -&gt; {</span>
<span class="fc" id="L602">      return (this.equals(((Collected)candidate)));</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Boolean equals(final Collected&lt;ElementType&gt; aCollection)
  {
<span class="nc" id="L611">    java.lang.String exitID = &quot;Collection&gt;&gt;equals&quot;;</span>
<span class="nc" id="L612">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L613">    return (Boolean)False.literal();</span>
  }

  /**
   * @return 
   */
  public   Boolean allSatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L621">    java.lang.String exitID = &quot;Collection&gt;&gt;allSatisfy&quot;;</span>
<span class="nc" id="L622">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L623">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L624">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L625">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L626">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifFalse(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L627">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L630">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean anySatisfy(final MonadicPredicate testBlock)
  {
<span class="nc" id="L639">    java.lang.String exitID = &quot;Collection&gt;&gt;anySatisfy&quot;;</span>
<span class="nc" id="L640">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L641">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L642">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L643">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L644">      return (Boolean)f0.exit(exitID, testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L645">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L648">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean contains(final MonadicPredicate testBlock)
  {
<span class="nc" id="L657">    java.lang.String exitID = &quot;Collection&gt;&gt;contains&quot;;</span>
<span class="nc" id="L658">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L659">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L660">    this.detect_ifNone(testBlock, Predicate.with(f2 -&gt; {</span>
<span class="nc" id="L661">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="nc" id="L663">    return (Boolean)f0.exit(exitID, True.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean includes(final Subject anObject)
  {
<span class="nc" id="L672">    java.lang.String exitID = &quot;Collection&gt;&gt;includes&quot;;</span>
<span class="nc" id="L673">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L674">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L675">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L676">      Hoot.Behaviors.Object element = f2.getValue(0).value();</span>
<span class="nc" id="L677">      return (Boolean)f0.exit(exitID, (element.equals(anObject)).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L678">      return (Boolean)f0.exit(exitID, True.literal());</span>
    }, &quot;&quot;)));
    }, &quot;element&quot;));
<span class="nc" id="L681">    return (Boolean)f0.exit(exitID, False.literal());</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean isEmpty()
  {
<span class="fc" id="L690">    java.lang.String exitID = &quot;Collection&gt;&gt;isEmpty&quot;;</span>
<span class="fc" id="L691">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L692">    return (Boolean)Boolean.from((SmallInteger.from(0).equals(this.size())));</span>
  }

  /**
   * @return 
   */
  public   Boolean notEmpty()
  {
<span class="nc" id="L700">    java.lang.String exitID = &quot;Collection&gt;&gt;notEmpty&quot;;</span>
<span class="nc" id="L701">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L702">    return (Boolean)this.isEmpty().not();</span>
  }

  /**
   * @return 
   */
  public   Collection emptyCheck()
  {
<span class="nc" id="L710">    java.lang.String exitID = &quot;Collection&gt;&gt;emptyCheck&quot;;</span>
<span class="nc" id="L711">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L712">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L713">    this.isEmpty().ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L714">      return (Collection)f0.exit(exitID, this.emptyCollectionError());</span>
    }, &quot;&quot;));
<span class="nc" id="L716">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   int checkRange(final Ordinal index)
  {
<span class="nc" id="L725">    java.lang.String exitID = &quot;Collection&gt;&gt;checkRange&quot;;</span>
<span class="nc" id="L726">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L727">    return (int)this.checkIndex(index);</span>
  }

  /**
   * @return 
   */
  public   int checkIndex(final Ordinal index)
  {
<span class="fc" id="L735">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex&quot;;</span>
<span class="fc" id="L736">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L737">    Integer x = ((Integer)index);</span>

<span class="fc" id="L739">    Integer size = this.size();</span>

<span class="fc" id="L741">    int i = (x.primitiveInteger() - 1);</span>
<span class="pc bpc" id="L742" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L743">      this.indexError_limit(index, Unity);</span>
<span class="nc" id="L744">      return (0 - 1);</span>
    };
<span class="pc bpc" id="L746" title="1 of 2 branches missed.">    if (!((i &lt; size.primitiveInteger()))) {</span>
<span class="nc" id="L747">      this.indexError_limit(index, size);</span>
<span class="nc" id="L748">      return (0 - 1);</span>
    };
<span class="fc" id="L750">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   int checkIndex_ifAbsent(final Ordinal index, final NiladicValuable aBlock)
  {
<span class="fc" id="L758">    java.lang.String exitID = &quot;Collection&gt;&gt;checkIndex_ifAbsent&quot;;</span>
<span class="fc" id="L759">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L760">    Integer x = ((Integer)index);</span>

<span class="fc" id="L762">    Integer size = this.size();</span>

<span class="fc" id="L764">    int i = (x.primitiveInteger() - 1);</span>
<span class="pc bpc" id="L765" title="1 of 2 branches missed.">    if ((i &lt; 0)) {</span>
<span class="nc" id="L766">      aBlock.value();</span>
<span class="nc" id="L767">      return (0 - 1);</span>
    };
<span class="pc bpc" id="L769" title="1 of 2 branches missed.">    if (!((i &lt; size.primitiveInteger()))) {</span>
<span class="nc" id="L770">      aBlock.value();</span>
<span class="nc" id="L771">      return (0 - 1);</span>
    };
<span class="fc" id="L773">    return (int)i;</span>
  }

  /**
   * @return 
   */
  public   Collection registerType(final Object element)
  {
<span class="fc" id="L781">    java.lang.String exitID = &quot;Collection&gt;&gt;registerType&quot;;</span>
<span class="fc" id="L782">    Frame f0 = new Frame(exitID);</span>
<span class="fc" id="L783">    return f0.evaluate(() -&gt; {</span>
<span class="fc" id="L784">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L785">      return (Collection)f0.exit(exitID, this);</span>
    }, &quot;&quot;));

<span class="fc" id="L788">     elementType = element.species();</span>
<span class="fc" id="L789">    return (Collection)this;</span>
    });
  }

  /**
   * @return 
   */
  public   Boolean collectsElements(final Object element)
  {
<span class="nc" id="L798">    java.lang.String exitID = &quot;Collection&gt;&gt;collectsElements&quot;;</span>
<span class="nc" id="L799">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L800">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L801">    Object.isNull(element).ifTrue(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L802">      return (Boolean)f0.exit(exitID, False.literal());</span>
    }, &quot;&quot;));
<span class="nc" id="L804">    return (Boolean)f0.exit(exitID, Boolean.from(element.species().inheritsFrom(this.elementType())));</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findFirst(final MonadicPredicate testBlock)
  {
<span class="nc" id="L813">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst&quot;;</span>
<span class="nc" id="L814">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L815">    return (Integer)this.findFirst_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L816">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findLast(final MonadicPredicate testBlock)
  {
<span class="nc" id="L825">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast&quot;;</span>
<span class="nc" id="L826">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L827">    return (Integer)this.findLast_ifAbsent(testBlock, Closure.with(f2 -&gt; {</span>
<span class="nc" id="L828">      return SmallInteger.from(0);</span>
    }, &quot;&quot;));
  }

  /**
   * @return 
   */
  public   Integer findFirst_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L837">    java.lang.String exitID = &quot;Collection&gt;&gt;findFirst_ifAbsent&quot;;</span>
<span class="nc" id="L838">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L839">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L840">    FastInteger index = SmallInteger.from(1).asFastInteger();</span>
<span class="nc" id="L841">    this.$do(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L842">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L843">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L844">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L846">    index.add(SmallInteger.from(1));</span>
<span class="nc" id="L847">    }, &quot;element&quot;));</span>
<span class="nc" id="L848">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }

  /**
   * @return 
   */
  public   Integer findLast_ifAbsent(final MonadicPredicate testBlock, final NiladicValuable exceptionBlock)
  {
<span class="nc" id="L857">    java.lang.String exitID = &quot;Collection&gt;&gt;findLast_ifAbsent&quot;;</span>
<span class="nc" id="L858">    Frame f0 = new Frame(exitID);</span>
<span class="nc" id="L859">    return f0.evaluate(() -&gt; {</span>
<span class="nc" id="L860">    FastInteger index = this.size().asSmallInteger().asFastInteger();</span>
<span class="nc" id="L861">    this.reverseDo(Closure.with(f2 -&gt; {</span>
<span class="nc" id="L862">      ElementType element = f2.getValue(0).value();</span>
<span class="nc" id="L863">      testBlock.value(element).ifTrue(Closure.with(f3 -&gt; {</span>
<span class="nc" id="L864">      return (Integer)f0.exit(exitID, index);</span>
    }, &quot;&quot;));
<span class="nc" id="L866">    index.subtract(SmallInteger.from(1));</span>
<span class="nc" id="L867">    }, &quot;element&quot;));</span>
<span class="nc" id="L868">    return (Integer)f0.exit(exitID, exceptionBlock.value());</span>
    });
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>